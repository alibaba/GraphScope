g.V($personId).out('1..3', 'knows').inV().dedup().as('friends').outE('workAt').has('workFrom', lt($workFromYear)).as('startWork').values('workFrom').as('works').select('startWork').inV().as('comp').values('name').as('orgname').select('comp').out('isLocatedIn').has('name', '$countryName').select('friends').order().by(select('works'), asc).by('id', asc).by(select('orgname'), desc).limit(10).select('friends', 'orgname', 'works').by(valueMap('id', 'firstName', 'lastName')).by().by()