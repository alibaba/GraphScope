g.V().hasLabel('PERSON').has('id', $personId).both('KNOWS').union(identity(), both('KNOWS')).dedup().has('id', neq($personId)).as('friends').in('HASCREATOR').hasLabel('POST').has('creationDate',lt($maxDate)).as('post').order().by('creationDate', desc).by('id', asc).limit(20).select('friends','post').by(valueMap('id', 'firstName', 'lastName')).by(valueMap('id', 'content', 'imageFile', 'creationDate'))