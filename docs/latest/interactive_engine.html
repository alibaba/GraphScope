<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GraphScope Interactive Engine &mdash; GraphScope  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GraphScope Learning Engine" href="learning_engine.html" />
    <link rel="prev" title="GraphScope Analytical Engine" href="analytics_engine.html" />

 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TMYCGJ0X2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4TMYCGJ0X2');
</script>

<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?da649ade2298891886e31922dfc8870f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> GraphScope
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>
  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      
      
        
          
        
      
      
        <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading_graph.html">Loading Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph_transformation.html">Graph Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="analytics_engine.html">GraphScope Analytical Engine</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GraphScope Interactive Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#apache-tinkerpop">Apache TinkerPop</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-gremlin-within-python">Connecting Gremlin within Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-gremlin-within-java">Connecting Gremlin within Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">Gremlin Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="#programming-with-gremlin-101">Programming with Gremlin–101</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-model">Data model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-language">Query language</a></li>
<li class="toctree-l3"><a class="reference internal" href="#an-example">An example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#compatibility-with-tinkerpop">Compatibility with TinkerPop</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#property-graph-constraints">Property graph constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unsupported-features">Unsupported features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gremlin-steps">Gremlin steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="learning_engine.html">GraphScope Learning Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_graph_store.html">Persistent Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="frequently_asked_questions.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference/python_index.html">Python API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/analytical_engine_index.html">Analytical Engine API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference/gae_java/index.html">Analytical Engine Java API Reference</a></li>
</ul>

      
    
  </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GraphScope</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>GraphScope Interactive Engine</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/alibaba/graphscope/edit/main/docs/interactive_engine.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="graphscope-interactive-engine">
<h1>GraphScope Interactive Engine<a class="headerlink" href="#graphscope-interactive-engine" title="Permalink to this headline"></a></h1>
<p>GraphScope Interactive Engine (GIE) is a distributed system designed specifically to make it easy for a variety of users to analyze large and complex graph structures in an <em>exploratory</em> manner.  It exploits <a class="reference external" href="http://tinkerpop.apache.org/">Gremlin</a> to provide a high-level language for interactive graph queries, and provides automatic parallel execution.</p>
<div class="section" id="apache-tinkerpop">
<h2>Apache TinkerPop<a class="headerlink" href="#apache-tinkerpop" title="Permalink to this headline"></a></h2>
<p><a class="reference external" href="http://tinkerpop.apache.org/">Apache TinkerPop</a> is an open framework for developing interactive graph applications using the Gremlin query language.  GIE implements TinkerPop’s <a class="reference external" href="https://tinkerpop.apache.org/docs/current/reference/#gremlin-server">Gremlin Server</a> interface so that the system can seamlessly interact with the TinkerPop ecosystem, including development tools such as <a class="reference external" href="https://tinkerpop.apache.org/docs/current/reference/#gremlin-console">Gremlin Console</a> and language wrappers such as Java and Python.</p>
</div>
<div class="section" id="connecting-gremlin-within-python">
<h2>Connecting Gremlin within Python<a class="headerlink" href="#connecting-gremlin-within-python" title="Permalink to this headline"></a></h2>
<p>GraphScope makes it easy to connect to a loaded graph within Python as shown below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">graphscope</span>
<span class="kn">from</span> <span class="nn">graphscope.dataset</span> <span class="kn">import</span> <span class="n">load_ldbc</span>

<span class="c1"># create a new session, load LDBC graph (as an example),</span>
<span class="c1"># and get the Gremlin entry point</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">graphscope</span><span class="o">.</span><span class="n">session</span><span class="p">(</span><span class="n">num_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">(</span><span class="n">sess</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;/path/to/ldbc_sample&#39;</span><span class="p">)</span>
<span class="n">interactive</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="c1"># check the total node_num and edge_num using Gremlin</span>
<span class="n">node_num</span> <span class="o">=</span> <span class="n">interactive</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().count()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="n">edge_num</span> <span class="o">=</span> <span class="n">interactive</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;g.E().count()&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
</pre></div>
</div>
<p>In fact, the <code class="docutils literal notranslate"><span class="pre">interactive</span></code> object is an instance of the <code class="docutils literal notranslate"><span class="pre">InteractiveQuery</span></code> Python class, which is a simple wrapper around <a class="reference external" href="https://pypi.org/project/gremlinpython/">Gremlin-Python</a>, which implements Gremlin within the Python language.</p>
<p>Each graph loaded in GraphScope is associated with a Gremlin endpoint (or URL) for a client to connect remotely to, which can be obtained as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">interactive</span><span class="o">.</span><span class="n">graph_url</span><span class="p">)</span>
</pre></div>
</div>
<p>You should see the following output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span><span class="p">:</span><span class="o">//</span><span class="n">your</span><span class="o">-</span><span class="n">endpoint</span><span class="p">:</span><span class="n">your</span><span class="o">-</span><span class="n">ip</span><span class="o">/</span><span class="n">gremlin</span>
</pre></div>
</div>
<p>With that information, we can directly query a graph using Gremlin-Python as described at <a class="reference external" href="https://tinkerpop.apache.org/docs/current/reference/#gremlin-python">here</a>.</p>
</div>
<div class="section" id="connecting-gremlin-within-java">
<h2>Connecting Gremlin within Java<a class="headerlink" href="#connecting-gremlin-within-java" title="Permalink to this headline"></a></h2>
<p>See <a class="reference external" href="https://tinkerpop.apache.org/docs/current/reference/#gremlin-java">Gremlin-Java</a> for connecting Gremlin within the Java language.</p>
</div>
<div class="section" id="id2">
<h2>Gremlin Console<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
<p>The <a class="reference external" href="https://tinkerpop.apache.org/docs/current/tutorials/the-gremlin-console/">Gremlin Console</a> allows you to experiment with GraphScope graphs and queries in an interactive environment.  With the same Gremlin endpoint (or URL), we can set up the Gremlin console to connect to a (remote) graph as the following:</p>
<p>1.Install Java [8, 12) required by Gremlin Console.</p>
<p>2.Download the appropriate version of the Gremlin console from <a class="reference external" href="https://tinkerpop.apache.org/downloads.html">Apache TinkerPop</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://archive.apache.org/dist/tinkerpop/3.4.8/apache-tinkerpop-gremlin-console-3.4.8-bin.zip
</pre></div>
</div>
<p>3.Unzip the downloaded file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>unzip apache-tinkerpop-gremlin-console-3.4.8-bin.zip
</pre></div>
</div>
<p>4.Change directories into the unzipped directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> apache-tinkerpop-gremlin-console-3.4.8
</pre></div>
</div>
<p>5.In the <cite>conf</cite> subdirectory, create a file named <cite>graphscope-remote.yaml</cite> with the following text. Replace <em>your-endpoint</em> and <em>your-port</em> with the hostname (or IP address) and port of your GraphScope session, respectively.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">hosts</span><span class="p">:</span> <span class="p">[</span><span class="n">your</span><span class="o">-</span><span class="n">endpoint</span><span class="p">]</span>
<span class="n">port</span><span class="p">:</span> <span class="n">your</span><span class="o">-</span><span class="n">port</span>
<span class="n">serializer</span><span class="p">:</span> <span class="p">{</span> <span class="n">className</span><span class="p">:</span> <span class="n">org</span><span class="o">.</span><span class="n">apache</span><span class="o">.</span><span class="n">tinkerpop</span><span class="o">.</span><span class="n">gremlin</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">ser</span><span class="o">.</span><span class="n">GryoMessageSerializerV1d0</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="p">{</span> <span class="n">serializeResultToString</span><span class="p">:</span> <span class="n">true</span> <span class="p">}}</span>
</pre></div>
</div>
<p>6.Enter the following command to start the Gremlin Console.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bin/gremlin.sh
</pre></div>
</div>
<p>7.At the <cite>gremlin&gt;</cite> prompt, enter the following to connect to the GraphScope session and switch to remote mode so that all subsequent Gremlin queries will be sent to the remote connection automatically.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>:remote connect tinkerpop.server conf/graphscope-remote.yaml
:remote console
</pre></div>
</div>
<p>8.Now you can start sending Gremlin queries (such as <code class="docutils literal notranslate"><span class="pre">g.V().limit(1)</span></code>).  When you are finished, enter the following to exit the Gremlin Console.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>:exit
</pre></div>
</div>
</div>
<div class="section" id="programming-with-gremlin-101">
<h2>Programming with Gremlin–101<a class="headerlink" href="#programming-with-gremlin-101" title="Permalink to this headline"></a></h2>
<p>GIE is designed to faithfully preserve the programming model of Gremlin, and as a result it can be used to scale existing Gremlin applications to large compute clusters with minimum modification.  In this section, we provide a high-level view of the programming model, highlighting the key concepts including the data model and query language.  For a complete reference on Gremlin, see <a class="reference external" href="https://tinkerpop.apache.org/docs/current/reference/">TinkerPop reference</a>.</p>
<div class="section" id="data-model">
<h3>Data model<a class="headerlink" href="#data-model" title="Permalink to this headline"></a></h3>
<p>Gremlin enables users to define ad-hoc traversals on property graphs. A property graph is a directed graph in which vertices and edges can have a set of properties. Every entity (vertex or edge) is identified by a unique identifier (<code class="docutils literal notranslate"><span class="pre">ID</span></code>), and has a (<code class="docutils literal notranslate"><span class="pre">label</span></code>) indicating its type or role. Each property is a key-value pair with combination of entity <code class="docutils literal notranslate"><span class="pre">ID</span></code> and property name as the key.</p>
<a class="reference internal image-reference" href="_images/property_graph.png"><img alt="An example e-commerce property graph." class="align-center" src="_images/property_graph.png" style="width: 400px;" /></a>
<p>The above figure shows an example property graph. It contains <code class="docutils literal notranslate"><span class="pre">user</span></code>, <code class="docutils literal notranslate"><span class="pre">product</span></code>, and <code class="docutils literal notranslate"><span class="pre">address</span></code> vertices connected by <code class="docutils literal notranslate"><span class="pre">order</span></code>, <code class="docutils literal notranslate"><span class="pre">deliver</span></code>, <code class="docutils literal notranslate"><span class="pre">belongs_to</span></code>, and <code class="docutils literal notranslate"><span class="pre">home_of</span></code> edges. A path following vertices 1–&gt;2–&gt;3, shown as the dotted line, indicates that a buyer “Tom” ordered a product “gift” offered by a seller “Jack”, with a price of “$99”.</p>
</div>
<div class="section" id="query-language">
<h3>Query language<a class="headerlink" href="#query-language" title="Permalink to this headline"></a></h3>
<p>In a Gremlin traversal, a set of <em>traversers</em> walk a graph according to particular user-provided instructions, and the result of the traversal is the collection of all halted traversers. A traverser is the basic unit of data processed by a Gremlin engine. Each traverser maintains a location that is a reference to the current vertex, edge or property being visited, and (optionally) the path history with application state.</p>
<p>The flexibility of Gremlin mainly stems from <em>nested traversal</em>, which allows a traversal to be embedded within another operator, and used as a function to be invoked by the enclosing operator for processing input. The role and signature of the function are determined by the type of the enclosing operator.</p>
<p>For example, a nested traversal within the <code class="docutils literal notranslate"><span class="pre">where</span></code> operator acts as a predicate function for conditional filters, while that within the <code class="docutils literal notranslate"><span class="pre">select</span></code> or <code class="docutils literal notranslate"><span class="pre">order</span></code> operator maps each traverser to the output or ordering key for sorting the output, respectively.</p>
<p>Nested traversal is also critical to the support for loops, which are expressed using a pair of the <code class="docutils literal notranslate"><span class="pre">repeat</span></code> and <code class="docutils literal notranslate"><span class="pre">until/times</span></code> operators. A nested traversal within the <code class="docutils literal notranslate"><span class="pre">repeat</span></code> operator will be looped over until the given break predicate is satisfied. The predicate (or termination condition) is defined within the <code class="docutils literal notranslate"><span class="pre">until</span></code> operator, applied to each output traverser separately from each iteration. The <code class="docutils literal notranslate"><span class="pre">times</span></code> operator can also terminate a loop after a fix number of <code class="docutils literal notranslate"><span class="pre">k</span></code> iterations.</p>
</div>
<div class="section" id="an-example">
<h3>An example<a class="headerlink" href="#an-example" title="Permalink to this headline"></a></h3>
<p>Below shows a Gremlin query for cycle detection, which tries to find cyclic paths of length <code class="docutils literal notranslate"><span class="pre">k</span></code> starting from a given account.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>g.V(&#39;account&#39;).has(&#39;id&#39;,&#39;2&#39;).as(&#39;s&#39;)
 .out(&#39;k-1..k&#39;, &#39;transfer&#39;)
 .with(&#39;PATH_OPT&#39;, &#39;SIMPLE&#39;)
 .endV()
 .where(out(&#39;transfer&#39;).eq(&#39;s&#39;))
 .path().limit(1)
</pre></div>
</div>
<p>First, the source operator <code class="docutils literal notranslate"><span class="pre">V</span></code> (with the <code class="docutils literal notranslate"><span class="pre">has</span></code> filter) returns all the <code class="docutils literal notranslate"><span class="pre">account</span></code> vertices with an identifier of <code class="docutils literal notranslate"><span class="pre">2</span></code>. The <code class="docutils literal notranslate"><span class="pre">as</span></code> operator is a <em>modulator</em> that does not change the input collection of traversers but introduces a name (<code class="docutils literal notranslate"><span class="pre">s</span></code> in this case) for later references. Second, it traverses the outgoing <code class="docutils literal notranslate"><span class="pre">transfer</span></code> edges for exact <code class="docutils literal notranslate"><span class="pre">k-1</span></code> times ( <code class="docutils literal notranslate"><span class="pre">out()</span></code> with a range of lower bound <code class="docutils literal notranslate"><span class="pre">k-1</span></code> (included) and upper bound <code class="docutils literal notranslate"><span class="pre">k</span></code> (excluded)), skipping any repeated vertices (<code class="docutils literal notranslate"><span class="pre">with()</span></code> the <code class="docutils literal notranslate"><span class="pre">SIMPLE</span></code> path option). Third, the <code class="docutils literal notranslate"><span class="pre">where</span></code> operator checks if the starting vertex <code class="docutils literal notranslate"><span class="pre">s</span></code> can be reached by one more step, that is, whether a cycle of length <code class="docutils literal notranslate"><span class="pre">k</span></code> is formed. Finally, for qualifying traversers, the <code class="docutils literal notranslate"><span class="pre">path</span></code> operator returns the full path information. The <code class="docutils literal notranslate"><span class="pre">limit</span></code> operator at the end indicates only one such result is needed.</p>
</div>
</div>
<div class="section" id="compatibility-with-tinkerpop">
<h2>Compatibility with TinkerPop<a class="headerlink" href="#compatibility-with-tinkerpop" title="Permalink to this headline"></a></h2>
<p>GIE supports the property graph model and Gremlin traversal language defined by Apache TinkerPop, and provides a Gremlin <em>Websockets</em> server that supports TinkerPop version 3.3 and 3.4. In addition to the original Gremlin queries, we further introduce some syntactic sugars to allow more succinct expression. In this section, we provide an overview of the key differences between our implementation of Gremlin and the Apache TinkerPop specification.</p>
<div class="section" id="property-graph-constraints">
<h3>Property graph constraints<a class="headerlink" href="#property-graph-constraints" title="Permalink to this headline"></a></h3>
<p>The current release (MaxGraph) leverages <a class="reference external" href="https://github.com/v6d-io/v6d">Vineyard</a> to supply an in-memory store for <em>immutable</em> graph data that can be partitioned across multiple servers.  By design, it introduces the following constraints:</p>
<ul class="simple">
<li><p>Each graph has a schema comprised of the edge labels, property keys, and vertex labels used therein.</p></li>
<li><p>Each vertex type or label has a primary key (property) defined by user.  The system will automatically generate a <code class="docutils literal notranslate"><span class="pre">String</span></code>-typed unique identifier for each vertex and edge, encoding both the label information as well as user-defined primary keys (for vertex).</p></li>
<li><p>Each vertex or edge property can be of the following data types: <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, <code class="docutils literal notranslate"><span class="pre">double</span></code>, <code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">List&lt;int&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">List&lt;long&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">List&lt;String&gt;</span></code>.</p></li>
</ul>
</div>
<div class="section" id="unsupported-features">
<h3>Unsupported features<a class="headerlink" href="#unsupported-features" title="Permalink to this headline"></a></h3>
<p>Because of the distributed nature of the system, the following features are not supported in the current release:</p>
<ul class="simple">
<li><p>Graph mutations.</p></li>
<li><p>Lambda and Groovy expressions and functions, such as the <code class="docutils literal notranslate"><span class="pre">.map{&lt;expression&gt;}</span></code>, the <code class="docutils literal notranslate"><span class="pre">.by{&lt;expression&gt;}</span></code>, and the <code class="docutils literal notranslate"><span class="pre">.filter{&lt;expression&gt;}</span></code> functions, <code class="docutils literal notranslate"><span class="pre">1+1</span></code>, and <code class="docutils literal notranslate"><span class="pre">System.currentTimeMillis()</span></code>, etc.</p></li>
<li><p>Gremlin traversal strategies.</p></li>
<li><p>Transactions.</p></li>
<li><p>Secondary index isn’t currently available.  Primary keys will be automatically indexed.</p></li>
</ul>
</div>
<div class="section" id="gremlin-steps">
<h3>Gremlin steps<a class="headerlink" href="#gremlin-steps" title="Permalink to this headline"></a></h3>
<p>Currently GIE supports the following Gremlin steps:</p>
<ul class="simple">
<li><p>Source steps, e.g.,</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">//V</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">()</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">(</span><span class="n">id1</span><span class="p">,</span><span class="w"> </span><span class="n">id2</span><span class="p">)</span><span class="w"></span>

<span class="c1">//E</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">E</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Filter steps, e.g.,</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>//hasLabel
g.V().hasLabel(&quot;labelName&quot;)
g.V().hasLabel(&quot;labelName1&quot;, &quot;labelName2&quot;)

//has
g.V().has(&quot;attrName&quot;)
g.V().has(&quot;attrName&quot;, attrValue)
g.V().has(&quot;labelName&quot;, &quot;attrName&quot;, attrValue)
g.V().has(&quot;attrName&quot;, eq(1))
g.V().has(&quot;attrName&quot;, neq(1))
g.V().has(&quot;attrName&quot;, lt(1))
g.V().has(&quot;attrName&quot;, lte(1))
g.V().has(&quot;attrName&quot;, gt(1))
g.V().has(&quot;attrName&quot;, gte(1))
g.V().has(&quot;attrName&quot;, within([1,2,3]))
g.V().has(&quot;attrName&quot;, without([1,2,3]))
g.V().has(&quot;attrName&quot;, inside(10, 20))
g.V().has(&quot;attrName&quot;, outside(10, 20))

// P.not
g.V().has(&quot;attrName&quot;, P.not(eq(10)))

//is
g.V().values(&quot;age&quot;).is(gt(70))

//filter with expression (`expr()` syntactic sugar)
g.V().where(expr(&#39;@.age &gt; 20&#39;)) //@.age refers to the &quot;age&quot; property of the head entry
g.V().as(&#39;a&#39;).out().as(&#39;b&#39;).where(expr(&#39;@a.age &lt;= @b.age&#39;))  //@a.age refers to the &quot;age&quot; property of the &quot;a&quot; entry
g.V().where(expr(&#39;30 within @.a&#39;))  //the &quot;a&quot; property of the head entry has integer array type

//project with expression (`expr()` syntactic sugar)
g.V().select(expr(&quot;@.age&quot;)) //@.age refers to the &quot;age&quot; property of the head entry

//bits manipulation in expression
g.V().select(expr(&quot;@.number &amp; 2&quot;)) //the &quot;number&quot; property of the head entry is integer type
g.V().select(expr(&quot;@.number | 2&quot;))
g.V().select(expr(&quot;@.number ^ 2&quot;))
g.V().select(expr(&quot;@.number &lt;&lt; 2&quot;))
g.V().select(expr(&quot;@.number &gt;&gt; 2&quot;))
g.V().where(expr(&quot;@.number &amp; 64 != 0&quot;))

//arithmetic operations in expression
g.V().select(expr(&quot;@.number + 2&quot;))
g.V().select(expr(&quot;@.number - 2&quot;))
g.V().select(expr(&quot;@.number * 2&quot;))
g.V().select(expr(&quot;@.number / 2&quot;))
g.V().select(expr(&quot;(@.number + 2) / 4 + (@.age * 10)&quot;)) //the &quot;number&quot; and &quot;age&quot; properties of the head entry are integer type

//exponentiation in expression
g.V().select(expr(&quot;@.number ^^ 3&quot;))
g.V().select(expr(&quot;@.number ^^ -3&quot;))

//filter with a sub-query
g.V().where(out().count().is(gt(4)))

//dedup
g.V().out().dedup()
g.V().out().dedup().by(&quot;name&quot;)
g.V().as(&quot;a&quot;).out().dedup(&quot;a&quot;)
g.V().as(&quot;a&quot;).out().dedup(&quot;a&quot;).by(&quot;name&quot;)

//limit
g.V().out().limit(100)
// to supported
g.V().out().range(10, 20)

//and/or

//TextP.*
g.V().has(&quot;attrName&quot;, TextP.containing(&quot;substr&quot;))
g.V().has(&quot;attrName&quot;, TextP.notContaining(&quot;substr&quot;))
g.V().has(&quot;attrName&quot;, TextP.startingWith(&quot;substr&quot;))
g.V().has(&quot;attrName&quot;, TextP.notStartingWith(&quot;substr&quot;))
g.V().has(&quot;attrName&quot;, TextP.endingWith(&quot;substr&quot;))
g.V().has(&quot;attrName&quot;, TextP.notEndingWith(&quot;substr&quot;))
</pre></div>
</div>
<ul class="simple">
<li><p>Map steps, e.g.,</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">//constant</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">contant</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">constant</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">)</span><span class="w"></span>

<span class="c1">//id</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">id</span><span class="p">()</span><span class="w"></span>

<span class="c1">//label</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">label</span><span class="p">()</span><span class="w"></span>

<span class="c1">//otherV</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">bothE</span><span class="p">().</span><span class="na">otherV</span><span class="p">()</span><span class="w"></span>

<span class="c1">//as...select</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">).</span><span class="na">out</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">select</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">).</span><span class="na">out</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">).</span><span class="na">out</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">).</span><span class="na">select</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>FlatMap steps, e.g.,</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span>//out/in/both
g.V().out()
g.V().in(&#39;knows&#39;)

//outE/inE/inV/outV
g.V().outE(&#39;knows&#39;).inV()
g.V().inE().bothV()

//path expansion (syntactic sugar)
//all simple path (vertex cannot duplicate) from `V()` via `knows` edge
//with at least 2 hops (included) and at most 4 hops (excluded)
//keep only the end vertex of the path
g.V().out(&#39;2..4&#39;, &#39;knows&#39;).with(&#39;PATH_OPT&#39;, &#39;SIMPLE&#39;).with(&#39;RESULT_OPT&#39;, &#39;END_V&#39;).endV()
//all arbitrary path (vertex can duplicate) from `V()` via `knows` edge
//with at least 2 hops (included) and at most 4 hops (excluded)
//keep all vertices of the path
g.V().out(&#39;2..4&#39;, &#39;knows&#39;).with(&#39;PATH_OPT&#39;, &#39;ARBITRARY&#39;).with(&#39;RESULT_OPT&#39;, &#39;ALL_V&#39;)

//properties
g.V().values(&quot;name&quot;)
g.V().valueMap() // print all properties
g.V().valueMap(&quot;name&quot;)
g.V().valueMap(&quot;name&quot;, &quot;age&quot;)
</pre></div>
</div>
<ul class="simple">
<li><p>Aggregate steps, e.g.,</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">//global count</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">count</span><span class="p">()</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">where</span><span class="p">(</span><span class="n">out</span><span class="p">().</span><span class="na">in</span><span class="p">().</span><span class="na">count</span><span class="p">().</span><span class="na">is</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span><span class="w"></span>

<span class="c1">//fold</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">fold</span><span class="p">()</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">values</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="na">fold</span><span class="p">()</span><span class="w"></span>

<span class="c1">//groupCount</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">groupCount</span><span class="p">()</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">values</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="na">groupCount</span><span class="p">()</span><span class="w"></span>

<span class="c1">//groupBy</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">group</span><span class="p">()</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">group</span><span class="p">().</span><span class="na">by</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">out</span><span class="p">().</span><span class="na">group</span><span class="p">().</span><span class="na">by</span><span class="p">().</span><span class="na">by</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span><span class="w"></span>

<span class="c1">//groupBy multiple keys and set aliases</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">group</span><span class="p">().</span><span class="na">by</span><span class="p">(</span><span class="n">values</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">values</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">).</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">))</span><span class="w"></span>

<span class="c1">//groupBy multiple aggFuncs and set aliases</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">group</span><span class="p">().</span><span class="na">by</span><span class="p">().</span><span class="na">by</span><span class="p">(</span><span class="n">min</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;min&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">max</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="s">&quot;max&quot;</span><span class="p">))</span><span class="w"></span>

<span class="c1">//global max/min</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">values</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">).</span><span class="na">max</span><span class="p">()</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">values</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">).</span><span class="na">min</span><span class="p">()</span><span class="w"></span>

<span class="c1">//global sum</span><span class="w"></span>
<span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">values</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">).</span><span class="na">sum</span><span class="p">()</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Match step, e.g.,</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="p">.</span><span class="na">V</span><span class="p">().</span><span class="na">match</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">__</span><span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">).</span><span class="na">out</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">__</span><span class="p">.</span><span class="na">as</span><span class="p">(</span><span class="sc">&#39;b&#39;</span><span class="p">).</span><span class="na">out</span><span class="p">().</span><span class="na">as</span><span class="p">(</span><span class="sc">&#39;c&#39;</span><span class="p">)</span><span class="w"></span>
<span class="p">).</span><span class="na">select</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;c&#39;</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Known limitations</p>
<p>The following steps/functionalities are not currently available.</p>
<ul class="simple">
<li><p>Repeat (as most repeat cases can be fulfilled via path expansion syntactic sugar)</p></li>
<li><p>path()/simplePath() (as most cases can be fulfilled via path expansion syntactic sugar )</p></li>
<li><p>Local (some local operations such as count(local), dedup(local), etc.)</p></li>
<li><p>Branch</p></li>
<li><p>Explain</p></li>
<li><p>Profile</p></li>
<li><p>Sack</p></li>
<li><p>Subgraph (a simplified version to extract subgraphs into Vineyard is supported)</p></li>
<li><p>Cap</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GraphComputer</span></code> API (such as PageRank and ShortestPath) – please use the GraphScope Analytics Engine for the same purpose instead.</p></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="analytics_engine.html" class="btn btn-neutral float-left" title="GraphScope Analytical Engine" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="learning_engine.html" class="btn btn-neutral float-right" title="GraphScope Learning Engine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023, DAMO Academy, Alibaba Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          

            
              
                <dd><a href="../latest/index.html">latest</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../index.html">stable</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.17.0/index.html">v0.17.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.16.0/index.html">v0.16.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.15.0/index.html">v0.15.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.14.0/index.html">v0.14.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.13.0/index.html">v0.13.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.12.0/index.html">v0.12.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.11.0/index.html">v0.11.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.10.1/index.html">v0.10.1</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.10.0/index.html">v0.10.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.9.1/index.html">v0.9.1</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.9.0/index.html">v0.9.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.8.0/index.html">v0.8.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.7.0/index.html">v0.7.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.6.1/index.html">v0.6.1</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.6.0/index.html">v0.6.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.5.0/index.html">v0.5.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.4.1/index.html">v0.4.1</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.4.0/index.html">v0.4.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.3.0/index.html">v0.3.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.2.1/index.html">v0.2.1</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.2.0/index.html">v0.2.0</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.1.3/index.html">v0.1.3</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.1.2/index.html">v0.1.2</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.1.1/index.html">v0.1.1</a></dd>
              
            

          
        
          

            
              
                <dd><a href="../v0.1.0/index.html">v0.1.0</a></dd>
              
            

          
        
      </dl>
    </div>
  </div>

  <div class="rst-languages shift-up" role="note" aria-label="languages">
    <div class="rst-other-languages">
      <dl>
        <dt>Languages</dt>
        <dd><a href="index.html">en</a></dd>
        <dd><a href="zh/index.html">zh_CN</a></dd>
      </dl>

      <hr />
      <small>
        <span>Hosted by <a href="https://pages.github.com/">Github Pages</a>.</span>
      </small>
    </div>
  </div>


</body>
</html>