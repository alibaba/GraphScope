<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Supported Gremlin Steps" href="supported_gremlin_steps.html" /><link rel="prev" title="Guide and Examples" href="guide_and_examples.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.08.06 -->
        <title>Tutorial: LDBC Gremlin - GraphScope documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css?v=45cf7dbc" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css?v=2a6c4383" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css?v=d290406d" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=e72d9a73" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/panels.css?v=0f22cee4" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/rst-versions.css?v=52590405" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4TMYCGJ0X2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4TMYCGJ0X2');
</script>

<!-- Baidu analytics -->
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?da649ade2298891886e31922dfc8870f";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<!-- MathJax rendering -->
<script>
MathJax = {
  tex: {
    inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script
  type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
</head>
  <body>
    
<script>
  document.body.dataset.theme = "light";
</script>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">GraphScope  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/logo-h.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/intro.html">Introducing GraphScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loading_graphs.html">Loading Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/graph_analytics_workloads.html">Graph Analytics Workloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/graph_interactive_workloads.html">Graph Interactive Workloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/graph_learning_workloads.html">Graph Learning Workloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/design_of_graphscope.html">Design of GraphScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/positioning.html">Positioning of GraphScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frequently_asked_questions.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/install_on_local.html">Install GraphScope on Local</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/deploy_graphscope_on_self_managed_k8s.html">Deploy on K8s Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/deploy_with_existing_vineyard_cluster.html">Deploy with Existing Vineyard Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/persistent_storage_of_graphs_on_k8s.html">Persistent storage of graphs on the Kubernetes cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/deploy_graphscope_with_helm.html">Deploy GraphScope with <code class="docutils literal notranslate"><span class="pre">helm</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/install_in_offline_env.html">Install GraphScope in offline environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GraphScope Flex</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../flex/coordinator.html">Coordinator</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Coordinator</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flex/coordinator/getting_started.html">Getting Started</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../flex/coordinator/dev_guide.html">Development guide</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Development guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flex/coordinator/development/dev_and_test.html">Dev and Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flex/coordinator/development/python/README.html">Coordinator Python SDK Reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/coordinator/restful_api.html">Coordinator RESTFul API</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../flex/interactive_intro.html">GraphScope Interactive</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of GraphScope Interactive</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/custom_graph_data.html">Using Custom Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/stored_procedures.html">Stored Procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/data_model.html">Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/data_import.html">Data Import Configuration</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../flex/interactive/dev_guide.html">Development guide</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Development guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flex/interactive/development/dev_and_test.html">Dev and Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flex/interactive/development/java/java_sdk.html">Java SDK Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flex/interactive/development/python/python_sdk.html">Python SDK Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flex/interactive/development/restful_api.html">Interactive RESTFul API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flex/interactive/development/stored_procedure/cpp_procedure.html">Create c++ Stored Procedures on GraphScope Interactive</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/deployment.html">Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flex/interactive/glossary.html">Glossary</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Analytical Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analytical_engine/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analytical_engine/deployment.html">Deployment for GAE</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../analytical_engine/design_of_gae.html">Design of Analytical Engine</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Design of Analytical Engine</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/overview_and_architecture.html">Overview and Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/key_concepts.html">Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/vertex_centric_models.html">Vertex-Centric Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/programming_model_pie.html">Programming Model: PIE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/ingress.html">Ingress: Incrementalize Graph Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/flash.html">Programming Model: FLASH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/networkx_compatibility.html">NetworkX Compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/builtin_algorithms.html">Built-in Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/customized_algorithms.html">Customized Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../analytical_engine/performance_tuning.html">Performance Tuning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../analytical_engine/guide_and_examples.html">Guide and Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analytical_engine/dev_and_test.html">Dev and Test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Interactive Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Standalone Deployment for GIE</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tinkerpop_eco.html">Apache TinkerPop Ecosystem</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Apache TinkerPop Ecosystem</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tinkerpop_gremlin.html">GIE for Gremlin</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_and_examples.html">Guide and Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported_gremlin_steps.html">Supported Gremlin Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">FAQs for GIE Gremlin Usage</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../neo4j_eco.html">Neo4j Ecosystem</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Neo4j Ecosystem</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../neo4j/cypher_sdk.html">GIE for Cypher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../neo4j/supported_cypher.html">Cypher Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../neo4j/llm_assistant.html">Using LLM as an Assistant in GIE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gopt.html">GOpt: A Graph-Native Query Optimization Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graph_planner.html">Graph Planner Interface by JNI and RESTful API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmark_tool.html">A Generic Benchmark Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_of_gie.html">Design of GIE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_and_test.html">Dev and Test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Learning Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../learning_engine/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learning_engine/design_of_gle.html">Design of GLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learning_engine/graph_sampling.html">Graph Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learning_engine/guide_and_examples.html">Guide and Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../learning_engine/dev_and_test.html">Dev and Test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Storage Engine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../storage_engine/grin.html">GRIN: Graph Retrieval INterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_engine/groot.html">Groot: Persistent Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_engine/vineyard.html">In-memory immutable graphs on Vineyard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_engine/graphar.html">GraphAr: Standard Graph Data File Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../storage_engine/gart.html">GART: Bridging the Gap between Relational OLTP and Graph Workloads</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshooting &amp; Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../utilities/how_to_find_logs.html">How to Find logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utilities/gs.html">Command-line Utility <code class="docutils literal notranslate"><span class="pre">gsctl</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utilities/error_codes.html">Error Codes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/dev_guide.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/code_style_guide.html">Code Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/how_to_test.html">How to Test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/how_to_contribute.html">How to Contribute</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/python_index.html">Python API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Python API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/session.html">Session</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Session</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.session.html">graphscope.session</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.get_default_session.html">graphscope.get_default_session</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.has_default_session.html">graphscope.has_default_session</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.set_option.html">graphscope.set_option</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.g.html">graphscope.g</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.gremlin.html">graphscope.gremlin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.graphlearn.html">graphscope.graphlearn</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/graph.html">Graph</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/app.html">Analytical App</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Analytical App</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.app.load_app.html">graphscope.framework.app.load_app</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/selector.html">Selector</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/operation.html">Operation</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Operation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.operation.Operation.__init__.html">graphscope.framework.operation.Operation.__init__</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.operation.Operation.as_op_def.html">graphscope.framework.operation.Operation.as_op_def</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.operation.Operation.key.html">graphscope.framework.operation.Operation.key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.operation.Operation.signature.html">graphscope.framework.operation.Operation.signature</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.operation.Operation.eval.html">graphscope.framework.operation.Operation.eval</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.operation.Operation.evaluated.html">graphscope.framework.operation.Operation.evaluated</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.create_app.html">graphscope.framework.dag_utils.create_app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.bind_app.html">graphscope.framework.dag_utils.bind_app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.run_app.html">graphscope.framework.dag_utils.run_app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.create_graph.html">graphscope.framework.dag_utils.create_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.create_loader.html">graphscope.framework.dag_utils.create_loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.add_labels_to_graph.html">graphscope.framework.dag_utils.add_labels_to_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.dynamic_to_arrow.html">graphscope.framework.dag_utils.dynamic_to_arrow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.arrow_to_dynamic.html">graphscope.framework.dag_utils.arrow_to_dynamic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.modify_edges.html">graphscope.framework.dag_utils.modify_edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.modify_vertices.html">graphscope.framework.dag_utils.modify_vertices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.report_graph.html">graphscope.framework.dag_utils.report_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.project_arrow_property_graph.html">graphscope.framework.dag_utils.project_arrow_property_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.project_to_simple.html">graphscope.framework.dag_utils.project_to_simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.copy_graph.html">graphscope.framework.dag_utils.copy_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.to_directed.html">graphscope.framework.dag_utils.to_directed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.to_undirected.html">graphscope.framework.dag_utils.to_undirected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.create_graph_view.html">graphscope.framework.dag_utils.create_graph_view</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.clear_graph.html">graphscope.framework.dag_utils.clear_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.clear_edges.html">graphscope.framework.dag_utils.clear_edges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.create_subgraph.html">graphscope.framework.dag_utils.create_subgraph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.create_unload_op.html">graphscope.framework.dag_utils.create_unload_op</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.unload_app.html">graphscope.framework.dag_utils.unload_app</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.unload_graph.html">graphscope.framework.dag_utils.unload_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.unload_context.html">graphscope.framework.dag_utils.unload_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.context_to_numpy.html">graphscope.framework.dag_utils.context_to_numpy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.context_to_dataframe.html">graphscope.framework.dag_utils.context_to_dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.to_vineyard_tensor.html">graphscope.framework.dag_utils.to_vineyard_tensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.to_vineyard_dataframe.html">graphscope.framework.dag_utils.to_vineyard_dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.to_data_sink.html">graphscope.framework.dag_utils.to_data_sink</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.output.html">graphscope.framework.dag_utils.output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.get_context_data.html">graphscope.framework.dag_utils.get_context_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.add_column.html">graphscope.framework.dag_utils.add_column</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.graph_to_numpy.html">graphscope.framework.dag_utils.graph_to_numpy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.graph_to_dataframe.html">graphscope.framework.dag_utils.graph_to_dataframe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.framework.dag_utils.gremlin_to_subgraph.html">graphscope.framework.dag_utils.gremlin_to_subgraph</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/cython_sdk.html">Cython SDK API</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Cython SDK API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.Vertex.html">graphscope.Vertex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/generated/graphscope.declare.html">graphscope.declare</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/interactive.html">Interactive Query</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/learning.html">Graph Learning</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/networkx/index.html">NetworkX-style API</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of NetworkX-style API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/networkx/graphs.html">Graph types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/networkx/transformation.html">Graph Transformation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/networkx/builtin.html">Builtin algorithms</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/networkx/functions.html">Functions</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Functions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.degree.html">graphscope.nx.classes.function.degree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.degree_histogram.html">graphscope.nx.classes.function.degree_histogram</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.density.html">graphscope.nx.classes.function.density</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.info.html">graphscope.nx.classes.function.info</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.create_empty_copy.html">graphscope.nx.classes.function.create_empty_copy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.is_directed.html">graphscope.nx.classes.function.is_directed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.to_directed.html">graphscope.nx.classes.function.to_directed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.to_undirected.html">graphscope.nx.classes.function.to_undirected</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.is_empty.html">graphscope.nx.classes.function.is_empty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.add_star.html">graphscope.nx.classes.function.add_star</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.add_path.html">graphscope.nx.classes.function.add_path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.add_cycle.html">graphscope.nx.classes.function.add_cycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.subgraph.html">graphscope.nx.classes.function.subgraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.induced_subgraph.html">graphscope.nx.classes.function.induced_subgraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.edge_subgraph.html">graphscope.nx.classes.function.edge_subgraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.nodes.html">graphscope.nx.classes.function.nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.number_of_nodes.html">graphscope.nx.classes.function.number_of_nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.neighbors.html">graphscope.nx.classes.function.neighbors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.all_neighbors.html">graphscope.nx.classes.function.all_neighbors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.non_neighbors.html">graphscope.nx.classes.function.non_neighbors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.common_neighbors.html">graphscope.nx.classes.function.common_neighbors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.edges.html">graphscope.nx.classes.function.edges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.number_of_edges.html">graphscope.nx.classes.function.number_of_edges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.density.html">graphscope.nx.classes.function.density</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.non_edges.html">graphscope.nx.classes.function.non_edges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.selfloop_edges.html">graphscope.nx.classes.function.selfloop_edges</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.number_of_selfloops.html">graphscope.nx.classes.function.number_of_selfloops</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.nodes_with_selfloops.html">graphscope.nx.classes.function.nodes_with_selfloops</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.is_weighted.html">graphscope.nx.classes.function.is_weighted</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.is_negatively_weighted.html">graphscope.nx.classes.function.is_negatively_weighted</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.freeze.html">graphscope.nx.classes.function.freeze</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.classes.function.is_frozen.html">graphscope.nx.classes.function.is_frozen</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/networkx/generators.html">Graph generators</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Graph generators</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.atlas.graph_atlas.html">graphscope.nx.generators.atlas.graph_atlas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.atlas.graph_atlas_g.html">graphscope.nx.generators.atlas.graph_atlas_g</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.balanced_tree.html">graphscope.nx.generators.classic.balanced_tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.barbell_graph.html">graphscope.nx.generators.classic.barbell_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.binomial_tree.html">graphscope.nx.generators.classic.binomial_tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.complete_graph.html">graphscope.nx.generators.classic.complete_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.complete_multipartite_graph.html">graphscope.nx.generators.classic.complete_multipartite_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.circular_ladder_graph.html">graphscope.nx.generators.classic.circular_ladder_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.circulant_graph.html">graphscope.nx.generators.classic.circulant_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.cycle_graph.html">graphscope.nx.generators.classic.cycle_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.dorogovtsev_goltsev_mendes_graph.html">graphscope.nx.generators.classic.dorogovtsev_goltsev_mendes_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.empty_graph.html">graphscope.nx.generators.classic.empty_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.path_graph.html">graphscope.nx.generators.classic.path_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.star_graph.html">graphscope.nx.generators.classic.star_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.full_rary_tree.html">graphscope.nx.generators.classic.full_rary_tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.ladder_graph.html">graphscope.nx.generators.classic.ladder_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.lollipop_graph.html">graphscope.nx.generators.classic.lollipop_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.null_graph.html">graphscope.nx.generators.classic.null_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.trivial_graph.html">graphscope.nx.generators.classic.trivial_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.turan_graph.html">graphscope.nx.generators.classic.turan_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.classic.wheel_graph.html">graphscope.nx.generators.classic.wheel_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.expanders.margulis_gabber_galil_graph.html">graphscope.nx.generators.expanders.margulis_gabber_galil_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.expanders.chordal_cycle_graph.html">graphscope.nx.generators.expanders.chordal_cycle_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.expanders.paley_graph.html">graphscope.nx.generators.expanders.paley_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.make_small_graph.html">graphscope.nx.generators.small.make_small_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.LCF_graph.html">graphscope.nx.generators.small.LCF_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.bull_graph.html">graphscope.nx.generators.small.bull_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.chvatal_graph.html">graphscope.nx.generators.small.chvatal_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.cubical_graph.html">graphscope.nx.generators.small.cubical_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.desargues_graph.html">graphscope.nx.generators.small.desargues_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.diamond_graph.html">graphscope.nx.generators.small.diamond_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.dodecahedral_graph.html">graphscope.nx.generators.small.dodecahedral_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.frucht_graph.html">graphscope.nx.generators.small.frucht_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.heawood_graph.html">graphscope.nx.generators.small.heawood_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.house_graph.html">graphscope.nx.generators.small.house_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.house_x_graph.html">graphscope.nx.generators.small.house_x_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.icosahedral_graph.html">graphscope.nx.generators.small.icosahedral_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.krackhardt_kite_graph.html">graphscope.nx.generators.small.krackhardt_kite_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.moebius_kantor_graph.html">graphscope.nx.generators.small.moebius_kantor_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.octahedral_graph.html">graphscope.nx.generators.small.octahedral_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.pappus_graph.html">graphscope.nx.generators.small.pappus_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.petersen_graph.html">graphscope.nx.generators.small.petersen_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.sedgewick_maze_graph.html">graphscope.nx.generators.small.sedgewick_maze_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.tetrahedral_graph.html">graphscope.nx.generators.small.tetrahedral_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.truncated_cube_graph.html">graphscope.nx.generators.small.truncated_cube_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.truncated_tetrahedron_graph.html">graphscope.nx.generators.small.truncated_tetrahedron_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.small.tutte_graph.html">graphscope.nx.generators.small.tutte_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.duplication.duplication_divergence_graph.html">graphscope.nx.generators.duplication.duplication_divergence_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.duplication.partial_duplication_graph.html">graphscope.nx.generators.duplication.partial_duplication_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.configuration_model.html">graphscope.nx.generators.degree_seq.configuration_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.directed_configuration_model.html">graphscope.nx.generators.degree_seq.directed_configuration_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.expected_degree_graph.html">graphscope.nx.generators.degree_seq.expected_degree_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.havel_hakimi_graph.html">graphscope.nx.generators.degree_seq.havel_hakimi_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.directed_havel_hakimi_graph.html">graphscope.nx.generators.degree_seq.directed_havel_hakimi_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.degree_sequence_tree.html">graphscope.nx.generators.degree_seq.degree_sequence_tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.degree_seq.random_degree_sequence_graph.html">graphscope.nx.generators.degree_seq.random_degree_sequence_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.directed.gn_graph.html">graphscope.nx.generators.directed.gn_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.directed.gnr_graph.html">graphscope.nx.generators.directed.gnr_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.directed.gnc_graph.html">graphscope.nx.generators.directed.gnc_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.directed.random_k_out_graph.html">graphscope.nx.generators.directed.random_k_out_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.directed.scale_free_graph.html">graphscope.nx.generators.directed.scale_free_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.geometric.random_geometric_graph.html">graphscope.nx.generators.geometric.random_geometric_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.geometric.soft_random_geometric_graph.html">graphscope.nx.generators.geometric.soft_random_geometric_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.geometric.geographical_threshold_graph.html">graphscope.nx.generators.geometric.geographical_threshold_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.geometric.waxman_graph.html">graphscope.nx.generators.geometric.waxman_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.geometric.thresholded_random_geometric_graph.html">graphscope.nx.generators.geometric.thresholded_random_geometric_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.ego.ego_graph.html">graphscope.nx.generators.ego.ego_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/networkx.generators.stochastic.stochastic_graph.html">networkx.generators.stochastic.stochastic_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/networkx.generators.internet_as_graphs.random_internet_as_graph.html">networkx.generators.internet_as_graphs.random_internet_as_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.intersection.uniform_random_intersection_graph.html">graphscope.nx.generators.intersection.uniform_random_intersection_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.intersection.k_random_intersection_graph.html">graphscope.nx.generators.intersection.k_random_intersection_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.intersection.general_random_intersection_graph.html">graphscope.nx.generators.intersection.general_random_intersection_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.social.karate_club_graph.html">graphscope.nx.generators.social.karate_club_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.social.davis_southern_women_graph.html">graphscope.nx.generators.social.davis_southern_women_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.social.florentine_families_graph.html">graphscope.nx.generators.social.florentine_families_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.social.les_miserables_graph.html">graphscope.nx.generators.social.les_miserables_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.caveman_graph.html">graphscope.nx.generators.community.caveman_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.connected_caveman_graph.html">graphscope.nx.generators.community.connected_caveman_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.gaussian_random_partition_graph.html">graphscope.nx.generators.community.gaussian_random_partition_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.LFR_benchmark_graph.html">graphscope.nx.generators.community.LFR_benchmark_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.planted_partition_graph.html">graphscope.nx.generators.community.planted_partition_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.random_partition_graph.html">graphscope.nx.generators.community.random_partition_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.relaxed_caveman_graph.html">graphscope.nx.generators.community.relaxed_caveman_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.ring_of_cliques.html">graphscope.nx.generators.community.ring_of_cliques</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.stochastic_block_model.html">graphscope.nx.generators.community.stochastic_block_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.community.windmill_graph.html">graphscope.nx.generators.community.windmill_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.spectral_graph_forge.spectral_graph_forge.html">graphscope.nx.generators.spectral_graph_forge.spectral_graph_forge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.trees.random_tree.html">graphscope.nx.generators.trees.random_tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.trees.prefix_tree.html">graphscope.nx.generators.trees.prefix_tree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.nonisomorphic_trees.nonisomorphic_trees.html">graphscope.nx.generators.nonisomorphic_trees.nonisomorphic_trees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.nonisomorphic_trees.number_of_nonisomorphic_trees.html">graphscope.nx.generators.nonisomorphic_trees.number_of_nonisomorphic_trees</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.triads.triad_graph.html">graphscope.nx.generators.triads.triad_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.joint_degree_seq.is_valid_joint_degree.html">graphscope.nx.generators.joint_degree_seq.is_valid_joint_degree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.joint_degree_seq.joint_degree_graph.html">graphscope.nx.generators.joint_degree_seq.joint_degree_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.joint_degree_seq.is_valid_directed_joint_degree.html">graphscope.nx.generators.joint_degree_seq.is_valid_directed_joint_degree</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.joint_degree_seq.directed_joint_degree_graph.html">graphscope.nx.generators.joint_degree_seq.directed_joint_degree_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.mycielski.mycielskian.html">graphscope.nx.generators.mycielski.mycielskian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.mycielski.mycielski_graph.html">graphscope.nx.generators.mycielski.mycielski_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.harary_graph.hnm_harary_graph.html">graphscope.nx.generators.harary_graph.hnm_harary_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.harary_graph.hkn_harary_graph.html">graphscope.nx.generators.harary_graph.hkn_harary_graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/networkx/generated/graphscope.nx.generators.sudoku.sudoku_graph.html">graphscope.nx.generators.sudoku.sudoku_graph</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/networkx/io.html">Reading graphs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/analytical_engine_index.html">Analytical Engine API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/gae_java/index.html">Analytical Engine Java API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/flex/index.html">Flex API Reference</a></li>
</ul>

</div>

<div class="rst-versions rst-versions-ver shift-up" role="note" aria-label="versions">
  <div class="rst-other-versions">
    <hr />
    <dl>
      <dt><span class="fa fa-book">Versions</span></dt>
      
        
          
            
              <dd><a href="../../../latest/index.html">
                
                  latest
                
              </a></dd>
            
          
        
      
        
          
            
              <dd><a href="../../../index.html">
                
                  stable
                
              </a></dd>
            
          
        
      
        
          
            
              <dd><a href="../../../v0.31.0/index.html">
                
                  <strong><em>v0.31.0</em></strong>
                
              </a></dd>
            
          
        
      
      
    </dl>
  </div>
</div>

<div class="rst-versions rst-versions-lang shift-up" role="note" aria-label="versions">
  <div class="rst-other-versions">
    <dl>
      <dt>Languages</dt>
      <dd><a href="../../index.html">en</a></dd>
      <dd><a href="../../zh/index.html">zh_CN</a></dd>
    </dl>

    <hr />
    <small>
      <span>Hosted on <a href="https://pages.cloudflare.com/">Cloudflare Pages</a>.</span>
    </small>
  </div>
</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/alibaba/GraphScope/blob/main/docs/interactive_engine/tinkerpop/tutorial_ldbc_gremlin.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/alibaba/GraphScope/edit/main/docs/interactive_engine/tinkerpop/tutorial_ldbc_gremlin.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section class="tex2jax_ignore mathjax_ignore" id="tutorial-ldbc-gremlin">
<h1>Tutorial: LDBC Gremlin<a class="headerlink" href="#tutorial-ldbc-gremlin" title="Permalink to this heading">¶</a></h1>
<p>Prior to beginning, it is important to note that <a class="reference external" href="https://ldbcouncil.org/">LDBC</a> is a highly
regarded organization in the realm of graph databases/systems benchmark standards and audit testing.
LDBC has developed several benchmark toolsuits, with GIE primarily focusing on the
<a class="reference external" href="https://ldbcouncil.org/benchmarks/snb/">Social Network Benchmark (SNB)</a>. This benchmark defines
graph workloads specifically for database management systems, including both interactive (high-QPS)
workloads and business intelligence workloads.</p>
<p>During this tutorial, we will walk you through various use cases when querying the simulated
social network utilized in SNB. By the conclusion of this tutorial, we are confident that
you will be proficient in constructing Gremlin queries that are just as intricate as the
business intelligence workloads found in SNB.</p>
<section id="load-the-ldbc-graph">
<h2>Load the LDBC Graph<a class="headerlink" href="#load-the-ldbc-graph" title="Permalink to this heading">¶</a></h2>
<p>For this tutorial, we will use the <a class="reference external" href="https://ldbcouncil.org/">LDBC social network</a> as the graph data, which has the following entities:</p>
<ul class="simple">
<li><p>vertex/edge labels(types) in the graph</p></li>
<li><p>connections and relationships among labels</p></li>
<li><p>properties related all kinds of labels</p></li>
</ul>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../../_images/LDBC_Schema.png"><img alt="The schema of the LDBC graph" src="../../_images/LDBC_Schema.png" style="width: 65%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 1. The schema of the LDBC graph (referred to LDBC <a class="reference external" href="https://ldbcouncil.org/benchmarks/snb/">SNB</a>).</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>LDBC graph is one of the built-in dataset of GraphScope, so it can be easily loaded through:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphscope.dataset.ldbc</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_ldbc</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">()</span>
</pre></div>
</div>
<p>This will load the LDBC social network with the scale factor (sf) 1.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We do permit loading much larger LDBC graphs, such as sf 3k.
To handle such large graphs, you’re recommended using the <a class="reference internal" href="#./deployment.md"><span class="xref myst">standalone deployment of GIE</span></a>
in a large cluster.</p>
</div>
<p>Currently, GIE supports Gremlin as its query language.
After loading the LDBC graph and initializing the engine, we can submit Gremlin queries to GIE through <code class="docutils literal notranslate"><span class="pre">g.execute(GREMLIN_QUERIES)</span></code> easily.</p>
<p>For example, if we want to count there are how many vertices and edges in the LDBC graph, we can simply write the following python codes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">graphscope</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphscope.dataset.ldbc</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_ldbc</span>

<span class="c1"># load the ldbc graph</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">()</span>

<span class="c1"># Hereafter, you can use the `graph` object to create an `gremlin` query session</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="c1"># then `execute` any supported gremlin query.</span>
<span class="c1"># count vertices</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="c1"># count edges</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.E().count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>Then the output should be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">190376</span><span class="o">]</span>
<span class="o">[</span><span class="m">787074</span><span class="o">]</span>
</pre></div>
</div>
<p>It suggests that there are 190376 vertices and 787074 edges in the LDBC sf1 graph.</p>
</section>
<section id="basic-vertex-edge-query">
<h2>Basic Vertex/Edge Query<a class="headerlink" href="#basic-vertex-edge-query" title="Permalink to this heading">¶</a></h2>
<p>It is very common to use SQL sentences to retrieve data from relational databases. In graph, vertices can be regarded as entities, and edges can be regarded as the connecting relationship among entities. Similarly, we can easily retrieve data from graph with GIE and corresponding graph query sentences.</p>
<section id="retrieve-vertices-and-edges">
<h3>Retrieve Vertices and Edges<a class="headerlink" href="#retrieve-vertices-and-edges" title="Permalink to this heading">¶</a></h3>
<p>As shown in the last tutorial, we can easily retrieve vertices and edges from graph through <code class="docutils literal notranslate"><span class="pre">g.V()</span></code> and <code class="docutils literal notranslate"><span class="pre">g.E()</span></code> Gremlin steps.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># then `execute` any supported gremlin query.</span>
<span class="c1"># Retrieve all vertices</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="c1"># Retrieve all edges</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.E()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output of the above code should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># All vertices</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">432345564227583365</span><span class="o">]</span>,<span class="w"> </span>......,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495622</span><span class="o">]]</span>
<span class="c1"># All edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">576460752303435306</span><span class="o">][</span><span class="m">432345564227579434</span>-hasType-&gt;504403158265495612<span class="o">]</span>,<span class="w"> </span>......,<span class="w"> </span>e<span class="o">[</span><span class="m">144115188075855941</span><span class="o">][</span><span class="m">504403158265495622</span>-isSubclassOf-&gt;504403158265495553<span class="o">]]</span>
</pre></div>
</div>
<p>For vertices, the number inside <code class="docutils literal notranslate"><span class="pre">[]</span></code> represents its id. However, the ids seem to be a little bit confusing: why are they so large? Actually, such large ids result from the different storage mechanism between graph and relational databases.</p>
<p>In relational databases, instances with different types are stored separately in different tables. Therefore, we usually use <em>local id</em> to retrieve specific instance from the table. For example, we can use <code class="docutils literal notranslate"><span class="pre">select</span> <span class="pre">*</span> <span class="pre">from</span> <span class="pre">Person</span> <span class="pre">where</span> <span class="pre">id=0</span></code> to retrieve person with id=0 from the Person table. Since the id is local, instances belonging to different tables may have the same id (e.g. person(id=0) and message(id=0)).</p>
<p>When it comes to graph storage, all kinds of vertices and edges are stored together. If it still uses local id to locate vertices and edges, there will be many conflicts. Therefore, every vertex and edge needs a specific global identifier, called <em>global id</em>, to distinguish it from others.</p>
<p>GIE uses <em>global id</em> to identify very vertex and edge. The ids look so large mainly because the underlying storage generates vertex’s  <em>global id</em> from its  <em>local id</em> and <em>label</em> by some bit operations(shift and plus). After all, the <em>global ids</em> are just identifiers, and we don’t need to worry too much about what it looks like.</p>
<p>For edges, still the number inside the first <code class="docutils literal notranslate"><span class="pre">[]</span></code> represents its id. The content inside the second <code class="docutils literal notranslate"><span class="pre">[]</span></code> is of the format <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">vertex</span> <span class="pre">id</span> <span class="pre">-edge</span> <span class="pre">label(type)-&gt;</span> <span class="pre">destination</span> <span class="pre">vertex</span> <span class="pre">id</span></code>，indicating the edge’s two end vertices’ id and the connection type (edge label).</p>
</section>
<section id="apply-some-filters">
<h3>Apply Some Filters<a class="headerlink" href="#apply-some-filters" title="Permalink to this heading">¶</a></h3>
<p>In most cases, we don’t need to retrieve all the vertices and edges from the graph, as we may only care about a small portion of them. Therefore, GIE with Gremlin provides you with some filtering operations to help find the data you are interested in.</p>
<p>If you only want to extract a vertex/edge with the given id, you can write Gremlin sentence <code class="docutils literal notranslate"><span class="pre">g.V(id)</span></code> in GIE. (<code class="docutils literal notranslate"><span class="pre">g.E(id)</span></code> will be supported in the future)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve vertex with id 1</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(1)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">1</span><span class="o">]]</span>
</pre></div>
</div>
<p>Sometimes, you may want to retrieve vertices/edges having a specific label, you can use <code class="docutils literal notranslate"><span class="pre">haveLabel(label)</span></code> step in Gremlin. For example, the following codes show how to find all person vertices.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve vertices having label &#39;person&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># All person vertices</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>......,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784710</span><span class="o">]]</span>
</pre></div>
</div>
<p>If you want to extract more than one type(label) of vertices, you can write many labels in the step, like <code class="docutils literal notranslate"><span class="pre">haveLabel(label1,</span> <span class="pre">label2...)</span></code>. For example, the following codes extracts all the vertices having label ‘person’ or ‘forum’.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve vertices having label &#39;person&#39; or &#39;forum&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;, &quot;forum&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># All person vertices and forum vertices</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>......,<span class="w">  </span>v<span class="o">[</span><span class="m">72057594037936036</span><span class="o">]]</span>
</pre></div>
</div>
<p>As mentioned in the last tutorial, GraphScope models data graph as property graph, so GIE allows user to filter the outputs according to some properties by using <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> step.</p>
<p>The usage of <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> step is very flexible. Firstly, it allows user to find vertices having some required properties. For example, the following codes aims to extract vertices having property ‘creationDate’</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve vertices having property &#39;creationDate&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().has(&quot;creationDate&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># All vertices having property &#39;creationDate&#39;</span>
v<span class="o">[</span><span class="m">360287970189718653</span><span class="o">]</span>,<span class="w"> </span>......,<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189718655</span><span class="o">]]</span>
</pre></div>
</div>
<p>From the LDBC schema shown above, you can see that vertices with label ‘person’, ‘forum’,  ‘post’ and ‘comment’ all have property ‘creationDate’. Therefore, the above query sentence is equivalent to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve vertices having label &#39;person&#39; or &#39;forum&#39; or &#39;message&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;, &quot;forum&quot;, &quot;comment&quot;, &quot;post&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>In addition, you may further require the extracted properties satisfying some conditions. For example, if you want to extract persons whose first name is ‘Joseph’, you can write the following codes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve person vertices whose first name is &#39;Joseph&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).has(&quot;firstName&quot;, &quot;Joseph&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>You can also write more complicated predicates in the <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> step, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve person vertices whose first name is not &#39;Joseph&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).has(&quot;firstName&quot;, not(eq(&quot;Joseph&quot;)))&#39;</span><span class="p">)</span>
<span class="c1"># Retrieve person vertices whose first name is either &#39;Joseph&#39; or &#39;Yacine&#39;</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).has(&quot;firstName&quot;, within(&quot;Joseph&quot;, &quot;Yacine&quot;))&#39;</span><span class="p">)</span>
<span class="c1"># Retrieve comment vertices created after the very beginning of year 2011</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;comment&quot;).has(&quot;creationDate&quot;, gt( &quot;2011-01-01T00:00:00.000+0000&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>Here are more <a class="reference external" href="https://tinkerpop.apache.org/docs/3.6.2/reference/#has-step">references</a> about <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> step in Gremlin.</p>
</section>
<section id="extract-property-values">
<h3>Extract Property Values<a class="headerlink" href="#extract-property-values" title="Permalink to this heading">¶</a></h3>
<p>Sometimes, you may more curious about the property values of the vertices/edges. With GIE, you can easily  use <code class="docutils literal notranslate"><span class="pre">values(PROPERTY_NAME)</span></code> Gremlin step to extract the vertices/edges’ property value.</p>
<p>For example, you have already known that vertex(id=38416) is a comment, and you are interested in its content, then you can write the following codes in GIE:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract comment vertex(id=38416)&#39;s content</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(38416).values(&quot;content&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># The content of the comment(id=38416)</span>
<span class="o">[</span><span class="s1">&#39;maybe&#39;</span><span class="o">]</span>
</pre></div>
</div>
</section>
<section id="real-applications">
<h3>Real Applications<a class="headerlink" href="#real-applications" title="Permalink to this heading">¶</a></h3>
<p>Since GIE provides python interface, it is very convenient to do some further data analytics on the retrieved data.</p>
<p>Here is an example about the statistics of the comment content’s length (word count) in the LDBC Graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphscope</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphscope.dataset.ldbc</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_ldbc</span>

<span class="c1"># load the modern graph as example.</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">()</span>

<span class="c1"># Hereafter, you can use the `graph` object to create an `gremlin` query session</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="c1"># Extract all comments&#39; contents</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;comment&quot;).values(&quot;content&quot;)&#39;</span><span class="p">)</span>
<span class="n">comment_contents</span> <span class="o">=</span> <span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="n">comment_length</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">comment_content</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="k">for</span> <span class="n">comment_content</span> <span class="ow">in</span> <span class="n">comment_contents</span><span class="p">];</span>

<span class="c1"># Draw Histogram</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="o">&lt;</span> <span class="mi">50</span><span class="p">),</span> <span class="n">comment_length</span><span class="p">)),</span> <span class="n">bins</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#607c8e&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Comments Length&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Comments Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Comment Length Histogram&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../../_images/comments_length_histogram.png"><img alt="The_histogram" src="../../_images/comments_length_histogram.png" style="width: 65%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 2. The histogram of the comments’ length in the ldbc social network.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>We can also draw a pie chart about the gender ratio in the social network.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphscope</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphscope.dataset.ldbc</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_ldbc</span>


<span class="c1"># load the modern graph as example.</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">()</span>

<span class="c1"># Hereafter, you can use the `graph` object to create an `gremlin` query session</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="c1"># Extract all person&#39; gender property value</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).values(&quot;gender&quot;)&#39;</span><span class="p">)</span>
<span class="n">person_genders</span> <span class="o">=</span> <span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="c1"># Count male and female</span>
<span class="n">male_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">female_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">gender</span> <span class="ow">in</span> <span class="n">person_genders</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">gender</span> <span class="o">==</span> <span class="s2">&quot;male&quot;</span><span class="p">:</span>
        <span class="n">male_count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">female_count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># Draw pie chart</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">male_count</span><span class="p">,</span> <span class="n">female_count</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Male&quot;</span><span class="p">,</span> <span class="s2">&quot;Female&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="../../_images/gender_ratio.png"><img alt="The_pie_chart" src="../../_images/gender_ratio.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 3. The pie chart of person’s gender in the ldbc social network.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="basic-traversal-query">
<h2>Basic Traversal Query<a class="headerlink" href="#basic-traversal-query" title="Permalink to this heading">¶</a></h2>
<p>The main difference between Property Graph and Relational Database is that Property Graph treats the relationship(edges) among entities(vertices) at the first class. Therefore, it is easy to walk through vertices and edges in the Property Graph according to some pre-defined paths.</p>
<p>In GIE, we call such walk as  <strong>Graph Traversal</strong>: This type of workload involves traversing the graph from a set of source vertices while satisfying the constraints on the vertices and edges that the traversal passes. Graph traversal differs from the <a class="reference external" href="https://graphscope.io/docs/latest/graph_analytics_workloads.html">analytics</a> workload as it typically accesses a small portion of the graph rather than the whole graph.</p>
<p>In this tutorial, we would like to discuss how to use Gremlin steps to traverse the Property Graph. Furthermore, we will show some examples about how to apply graph traversals in real world data analytics.</p>
<section id="expansion">
<h3>Expansion<a class="headerlink" href="#expansion" title="Permalink to this heading">¶</a></h3>
<p>The most basic unit in Graph Traversal is Expansion, which means starting from a vertex/edge and reaching its adjacencies. GIE currently supports the following expansion steps in Gremlin:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">out()</span></code>: Map the vertex to its outgoing adjacent vertices given the edge labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in()</span></code>: Map the vertex to its incoming adjacent vertices given the edge labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">both()</span></code>: Map the vertex to its adjacent vertices given the edge labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outE()</span></code>: Map the vertex to its outgoing incident edges given the edge labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inE()</span></code>: Map the vertex to its incoming incident edges given the edge labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bothE()</span></code>: Map the vertex to its incident edges given the edge labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outV()</span></code>: Map the edge to its outgoing/tail incident vertex.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inV()</span></code>: Map the edge to its incoming/head incident vertex.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">otherV()</span></code>: Map the edge to the incident vertex that was not just traversed from in the path history.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bothV():</span></code>Map the edge to its incident vertices.</p></li>
</ul>
<p>Here is a local subgraph extracted from the LDBC Graph, which is formed by a center person vertex (id=216172782113784483) and all of its adjacent edges and vertices. Then we will use this subgraph to explain all of the expansion steps.</p>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="../../_images/local_graph_example.png"><img alt="local_graph_example" src="../../_images/local_graph_example.png" style="width: 33%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 5. A local graph around a given person vertex.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="out-in-and-both">
<h4>out(), in() and both()<a class="headerlink" href="#out-in-and-both" title="Permalink to this heading">¶</a></h4>
<p>All of these three steps start traverse from source vertices to their adjacent vertices. The differences between them are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">out()</span></code> traverse through the <strong>outgoing</strong> edges to the adjacent vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in()</span></code> traverse through the <strong>incoming</strong> edges to the adjacent vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">both()</span></code> traverse through <strong>both of the outgoing and incoming</strong> edges to the adjacent vertices</p></li>
</ul>
<p>For example, if you want to find vertex(id=216172782113784483)’s adjacent vertices by the three steps, you can write sentences in GIE like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the vertex to its adjacent vertices through its outgoing edges</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).out()&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its adjacent vertices through its incoming edges</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).in()&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its adjacent vertices through all of its incident edges</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).both()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>This figure illustrates the execution process of <code class="docutils literal notranslate"><span class="pre">q1</span></code>, <code class="docutils literal notranslate"><span class="pre">q2</span></code> and <code class="docutils literal notranslate"><span class="pre">q3</span></code>:</p>
<figure class="align-default" id="id6">
<a class="reference internal image-reference" href="../../_images/out_in_both.png"><img alt="out_in_both" src="../../_images/out_in_both.png" style="width: 95%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 6. The examples of <code class="docutils literal notranslate"><span class="pre">out</span></code>/<code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">both</span></code> steps.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Therefore, the output of the above codes should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1: vertex&#39;s adjacent vertices through outgoing edges</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">432345564227569033</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075856168</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860911</span><span class="o">]]</span>
<span class="c1"># q2: vertex&#39;s adjacent vertices through incoming edges</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">72057594037934114</span><span class="o">]]</span>
<span class="c1"># q3: vertex&#39;s adjacent vertices through all of its incident edges</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">432345564227569033</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075856168</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860911</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037934114</span><span class="o">]]</span>
</pre></div>
</div>
<p>In addition, the three steps all support using edge labels as its parameters to further limit the traversal edges, like <code class="docutils literal notranslate"><span class="pre">out</span></code>/<code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">both(label1,</span> <span class="pre">label2,</span> <span class="pre">...)</span></code>, which means it only can traverse through the edges whose label is one of {label 1, label 2, …, label n}. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the vertex to its adjacent vertices through its incoming edges, and the edge label should be &#39;hasModerator&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).in(&quot;hasModerator&quot;)&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its adjacent vertices through its outgoing edges, and the edge label should be either &#39;studyAt&#39; or &#39;workAt&#39;</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).out(&quot;studyAt&quot;, &quot;workAt&quot;)&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its adjacent vertices through all of its incident edges, and the edge label should be either &#39;isLocatedIn&#39; or &#39;hasModerator&#39;</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).both(&quot;isLocatedIn&quot;, &quot;hasModerator&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>This figure illustrates the execution process of <code class="docutils literal notranslate"><span class="pre">q1</span></code>, <code class="docutils literal notranslate"><span class="pre">q2</span></code> and <code class="docutils literal notranslate"><span class="pre">q3</span></code>:</p>
<figure class="align-default" id="id7">
<a class="reference internal image-reference" href="../../_images/out_in_both_labels.png"><img alt="out_in_both_labels" src="../../_images/out_in_both_labels.png" style="width: 95%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 7. The examples of <code class="docutils literal notranslate"><span class="pre">out</span></code>/<code class="docutils literal notranslate"><span class="pre">in</span></code>/<code class="docutils literal notranslate"><span class="pre">both</span></code> steps from given labels.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Therefore, the output of the above codes should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1: vertex&#39;s adjacent vertices through incoming &#39;hasModerator&#39; edges</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">72057594037934114</span><span class="o">]]</span>
<span class="c1"># q1: vertex&#39;s adjacent vertices through outgoing &#39;studyAt&#39; or &#39;workAt&#39; edges</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">144115188075860911</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075856168</span><span class="o">]]</span>
<span class="c1"># q1: vertex&#39;s adjacent vertices through &#39;isLocatedIn&#39; or &#39;hasModerator&#39; edges</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037934114</span><span class="o">]]</span>
</pre></div>
</div>
</section>
<section id="oute-ine-and-bothe">
<h4>outE(), inE() and bothE()<a class="headerlink" href="#oute-ine-and-bothe" title="Permalink to this heading">¶</a></h4>
<p>All of these three steps start traverse from source vertices to their <strong>adjacent edges</strong>. Similar to <code class="docutils literal notranslate"><span class="pre">out()</span></code>, <code class="docutils literal notranslate"><span class="pre">in()</span></code> and <code class="docutils literal notranslate"><span class="pre">both()</span></code>, the differences between them are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">outE()</span></code> can only traverse to the <strong>outgoing</strong>  adjacent edges of the source vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inE()</span></code> can only traverse to the <strong>incoming</strong>  adjacent edges of the source vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bothE()</span></code> can traverse to <strong>both of the outgoing and incoming</strong> adjacent edges of the source vertices</p></li>
</ul>
<p>For example, if you want to find vertex(id=216172782113784483)’s adjacent edges by the three steps, you can write sentences in GIE like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the vertex to its outgoing adjacent edges</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).outE()&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its incoming adjacent edges</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).inE()&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to all of its adjacent edges</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).bothE()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>This figure illustrates the execution process of <code class="docutils literal notranslate"><span class="pre">q1</span></code>, <code class="docutils literal notranslate"><span class="pre">q2</span></code> and <code class="docutils literal notranslate"><span class="pre">q3</span></code>:</p>
<figure class="align-default" id="id8">
<a class="reference internal image-reference" href="../../_images/outE_inE_bothE.png"><img alt="The current states of graph queries" src="../../_images/outE_inE_bothE.png" style="width: 95%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 8. The examples of <code class="docutils literal notranslate"><span class="pre">outE</span></code>/<code class="docutils literal notranslate"><span class="pre">inE</span></code>/<code class="docutils literal notranslate"><span class="pre">bothE</span></code> steps.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Therefore, the output of the above codes should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1: vertex&#39;s incident outgoing edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">432345564227582847</span><span class="o">][</span><span class="m">216172782113784483</span>-hasInterest-&gt;432345564227569033<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">504403158265496227</span><span class="o">][</span><span class="m">216172782113784483</span>-isLocatedIn-&gt;288230376151712472<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">864691128455136658</span><span class="o">][</span><span class="m">216172782113784483</span>-workAt-&gt;144115188075856168<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">1008806316530991636</span><span class="o">][</span><span class="m">216172782113784483</span>-studyAt-&gt;144115188075860911<span class="o">]]</span>
<span class="c1"># q2: vertex&#39;s incident incoming edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">360287970189645858</span><span class="o">][</span><span class="m">72057594037934114</span>-hasModerator-&gt;216172782113784483<span class="o">]]</span>
<span class="c1"># q3: vertex&#39;s incident edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">360287970189645858</span><span class="o">][</span><span class="m">72057594037934114</span>-hasModerator-&gt;216172782113784483<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">432345564227582847</span><span class="o">][</span><span class="m">216172782113784483</span>-hasInterest-&gt;432345564227569033<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">504403158265496227</span><span class="o">][</span><span class="m">216172782113784483</span>-isLocatedIn-&gt;288230376151712472<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">864691128455136658</span><span class="o">][</span><span class="m">216172782113784483</span>-workAt-&gt;144115188075856168<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">1008806316530991636</span><span class="o">][</span><span class="m">216172782113784483</span>-studyAt-&gt;144115188075860911<span class="o">]]</span>
</pre></div>
</div>
<p>Similarly, the three steps also support using edge labels as its parameters to further limit the traversal edges, like <code class="docutils literal notranslate"><span class="pre">outE/inE.bothE(label1,</span> <span class="pre">label2,</span> <span class="pre">...)</span></code>, which means it only can traverse to the edges whose label is one of {label 1, label 2, …, label n}. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the vertex to its incident incoming edges, and the edge label should be &#39;hasModerator&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).inE(&quot;hasModerator&quot;)&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its incident outgoing edges, and the edge label should be either &#39;studyAt&#39; or &#39;workAt&#39;</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).outE(&quot;studyAt&quot;, &quot;workAt&quot;)&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the vertex to its incident edges, and the edge label should be either &#39;isLocatedIn&#39; or &#39;hasModerator&#39;</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).bothE(&quot;isLocatedIn&quot;, &quot;hasModerator&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>This figure illustrates the execution process of <code class="docutils literal notranslate"><span class="pre">q1</span></code>, <code class="docutils literal notranslate"><span class="pre">q2</span></code> and <code class="docutils literal notranslate"><span class="pre">q3</span></code>:</p>
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../../_images/outE_inE_bothE_labels.png"><img alt="outE_inE_bothE_labels" src="../../_images/outE_inE_bothE_labels.png" style="width: 95%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 9. The examples of <code class="docutils literal notranslate"><span class="pre">outE</span></code>/<code class="docutils literal notranslate"><span class="pre">inE</span></code>/<code class="docutils literal notranslate"><span class="pre">bothE</span></code> steps from given labels.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Therefore, the output of the above codes should like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1: vertex&#39;s incident incoming &#39;hasModerator&#39; edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">360287970189645858</span><span class="o">][</span><span class="m">72057594037934114</span>-hasModerator-&gt;216172782113784483<span class="o">]]</span>
<span class="c1"># q2: vertex&#39;s incident outgoing &#39;studyAt&#39; or &#39;workAt&#39; edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">1008806316530991636</span><span class="o">][</span><span class="m">216172782113784483</span>-studyAt-&gt;144115188075860911<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">864691128455136658</span><span class="o">][</span><span class="m">216172782113784483</span>-workAt-&gt;144115188075856168<span class="o">]]</span>
<span class="c1"># q3: vertex&#39;s incident &#39;isLocatedIn&#39; or &#39;hasModerator&#39; edges</span>
<span class="o">[</span>e<span class="o">[</span><span class="m">360287970189645858</span><span class="o">][</span><span class="m">72057594037934114</span>-hasModerator-&gt;216172782113784483<span class="o">]</span>,<span class="w"> </span>e<span class="o">[</span><span class="m">504403158265496227</span><span class="o">][</span><span class="m">216172782113784483</span>-isLocatedIn-&gt;288230376151712472<span class="o">]]</span>
</pre></div>
</div>
</section>
<section id="outv-inv-bothv-and-otherv">
<h4>outV(), inV(), bothV() and otherV()<a class="headerlink" href="#outv-inv-bothv-and-otherv" title="Permalink to this heading">¶</a></h4>
<p>When reaching an edge during the traversal, you may be interested in its incident vertices. Therefore, GIE supports Gremlin steps that traverse from source edges to their incident vertices.</p>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../../_images/out_in_vertices.png"><img alt="out_in_vertices" src="../../_images/out_in_vertices.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 10. The examples of outgoing/incoming vertex of an edge.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>For en edge <code class="docutils literal notranslate"><span class="pre">e1</span></code> whose direction is from <code class="docutils literal notranslate"><span class="pre">v1</span></code> to <code class="docutils literal notranslate"><span class="pre">v2</span></code>, we call <code class="docutils literal notranslate"><span class="pre">v1</span></code> as ‘outgoing vertex’ and <code class="docutils literal notranslate"><span class="pre">v2</span></code> as ‘incoming’ vertices.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">outV()</span></code>: traverse from source edges to the outgoing vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inV()</span></code>: traverse from source edges to the incoming vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bothV()</span></code>: traverse from source edges to both of the outgoing and incoming vertices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">otherV()</span></code>: this step is a little bit special, it traverse from source edges to the incident vertices that haven’t appear in the traversal history. It will be explained in details later.</p></li>
</ul>
<p>In the local subgraph, assume that currently we are at ‘isLocatedIn’ edge. If you want to get its incident vertices through <code class="docutils literal notranslate"><span class="pre">outV()/inV()/bothV()</span></code> step, you can write sentences in GIE like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the edge to its outgoing incident vertex</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).outE(&quot;isLocatedIn&quot;).outV()&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the edge to its incoming incident vertex</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).outE(&quot;isLocatedIn&quot;).inV()&#39;</span><span class="p">)</span>
<span class="c1"># Traverse from the edge to both of its incident vertex</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).outE(&quot;isLocatedIn&quot;).bothV()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>This figure illustrates the execution process of <code class="docutils literal notranslate"><span class="pre">q1</span></code>, <code class="docutils literal notranslate"><span class="pre">q2</span></code> and <code class="docutils literal notranslate"><span class="pre">q3</span></code>:</p>
<figure class="align-default" id="id11">
<a class="reference internal image-reference" href="../../_images/outV_inV_bothV.png"><img alt="outV_inV_bothV" src="../../_images/outV_inV_bothV.png" style="width: 95%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 11. The examples of outV/inV/bothV steps.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Therefore, the output of the above codes should like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1: the edge&#39;s outgoing vertex</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]]</span>
<span class="c1"># q2: the edge&#39;s incoming vertex</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]]</span>
<span class="c1"># q3: both of the edge&#39;s outgoing and incoming vertices</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]]</span>
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">otherV()</span></code>, it will only traverse to the vertices that haven’t been reached in the traversal history. For example, the ‘isLocatedIn’ edge is reached from the outgoing vertex ‘Person’, then the <code class="docutils literal notranslate"><span class="pre">otherV()</span></code>  of ‘isLocatedIn’ edge is its incoming vertex ‘Place’, because it hasn’t been visited before.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the edge to its incident vertex that hasn&#39;t been reached</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).outE(&quot;isLocatedIn&quot;).otherV()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># q1: &#39;place&#39; vertex, which has not been reached before</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]]</span>
</pre></div>
</div>
</section>
<section id="multiple-expansion-steps">
<h4>Multiple Expansion Steps<a class="headerlink" href="#multiple-expansion-steps" title="Permalink to this heading">¶</a></h4>
<p>You may have already noticed that graph traversal supports multiple expansion steps. For example, in Gremlin sentence<code class="docutils literal notranslate"><span class="pre">g.V(216172782113784483).outE('isLocatedIn').inV()</span></code>, <code class="docutils literal notranslate"><span class="pre">outE('isLocatedIn')</span></code> is first expansion and <code class="docutils literal notranslate"><span class="pre">inV()</span></code> is the second expansion.</p>
<p>The figure illustrates the execution process of this Gremlin sentence:</p>
<figure class="align-default" id="id12">
<a class="reference internal image-reference" href="../../_images/outE_then_inV.png"><img alt="outE_then_inV" src="../../_images/outE_then_inV.png" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 12. The examples of <code class="docutils literal notranslate"><span class="pre">outE</span></code> followed by <code class="docutils literal notranslate"><span class="pre">inV</span></code>.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>During the traversal, it firstly start from the source vertex ‘person’, and get to the ‘isLocatedIn’ edge. Then it starts from the ‘isLocatedIn’ edge, and get to the ‘place’ vertex. Thus the traversal ends, the ‘place’ vertex is the end of this traversal, and the ‘isLocatedIn’ edge can be regarded as the intermediate process of the traversal.</p>
<p>When GIE handle continuous multiple expansion steps during the traversal, the next expansion step will use the its previous expansion step’s output as its starting points. According to this property, we can summarize the following equivalent rules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">out()</span> <span class="pre">=</span> <span class="pre">outE().inV()</span> <span class="pre">=</span> <span class="pre">outE().otherV()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in()</span> <span class="pre">=</span> <span class="pre">inE().outV()</span> <span class="pre">=</span> <span class="pre">inE().otherV()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">both()</span> <span class="pre">=</span> <span class="pre">bothE().otherV()</span></code></p></li>
</ul>
<p>It is sure that GIE can support multiple vertex expansion steps. For example, the place (city) the person is located in ‘isPartOf’ a larger place (country). If you want to find the larger place, you can write multiple vertex expansion steps in GIE as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the vertex to the larger place it is located in by two vertex expansions</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>This figure illustrates the execution process:</p>
<figure class="align-default" id="id13">
<a class="reference internal image-reference" href="../../_images/out_out_predicate.png"><img alt="out_out_predicate" src="../../_images/out_out_predicate.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 13. The examples of two-hop outgoing vertices.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Therefore, the output of the Gremlin sentence should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># The larger place(country) that the person is located in</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]]</span>
</pre></div>
</div>
<p>There is one problem of currently introduced Gremlin traversal sentences: only the last step’s results are kept. Sometimes, you may need to record the intermediate results of the traversal for further analysis, but how? Actually, you can use the <code class="docutils literal notranslate"><span class="pre">as(TAG)</span></code> and <code class="docutils literal notranslate"><span class="pre">select(TAG</span> <span class="pre">1,</span> <span class="pre">TAG</span> <span class="pre">2,</span> <span class="pre">...,</span> <span class="pre">TAG</span> <span class="pre">N)</span></code> steps to keep the intermediate results:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">as(TAG)</span></code>: it gives a tag to the step it follows, and then its previous step’s value can be accessed through the tag.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select(TAG</span> <span class="pre">1,</span> <span class="pre">TAG</span> <span class="pre">2,</span> <span class="pre">...,</span> <span class="pre">TAG</span> <span class="pre">N)</span></code>: select all the values of the steps the given tags refer to.</p></li>
</ul>
<p>Extend from previous example, if you want to keep person, smaller place(city) and larger place(country) together in the output, you can write Gremlin sentence in GIE like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># a: person, b: city, c: country</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483).as(&quot;a&quot;)</span><span class="se">\</span>
<span class="s1">                 .out(&quot;isLocatedIn&quot;).as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                 .out(&quot;isPartOf&quot;).as(&quot;c&quot;)</span><span class="se">\</span>
<span class="s1">                 .select(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>where tag ‘a’ refers to ‘person’ vertex, tag ‘b’ refers to ‘city’ vertex and tag ‘c’ refers to ‘country’ vertex. The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]}]</span>
</pre></div>
</div>
</section>
<section id="expansion-from-many-starting-points">
<h4>Expansion from many starting points<a class="headerlink" href="#expansion-from-many-starting-points" title="Permalink to this heading">¶</a></h4>
<p>Currently, we only discuss the expansion from only one vertex/edges. However, it is very common to write Gremlin sentence like <code class="docutils literal notranslate"><span class="pre">g.V().out()</span></code> in GIE. In previous tutorials we have known that <code class="docutils literal notranslate"><span class="pre">g.V()</span></code> will get all the vertices in the graph. Then how to understand the meaning of <code class="docutils literal notranslate"><span class="pre">g.V().out()</span></code>?</p>
<p>The explain it more clear, let’s firstly look at a much simpler situation: starting from only two vertices. This is a subgraph of LDBC Graph formed by two person vertices’ local graphs, where the two person vertices’ ids are 216172782113784483 and 216172782113784555.</p>
<figure class="align-default" id="id14">
<a class="reference internal image-reference" href="../../_images/two_local_graphs.png"><img alt="two_local_graphs" src="../../_images/two_local_graphs.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 14. The examples of two local graphs.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>In addition, we further limit the starting points of the traversal to be exactly the two person vertices. Therefore, we can write the following Gremlin sentence in GIE:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traverse from the two source vertices to their adjacent vertices through their incident outgoing edges</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483, 216172782113784555).out()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The figure illustrates the execution process of <code class="docutils literal notranslate"><span class="pre">q1</span></code>:</p>
<figure class="align-default" id="id15">
<a class="reference internal image-reference" href="../../_images/out_two_starting_points.png"><img alt="two_local_graphs" src="../../_images/out_two_starting_points.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 15. The results of outgoing neighbors from two given vertices.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The traversal starts from the two person vertices, and then the <code class="docutils literal notranslate"><span class="pre">out()</span></code> step map the two source vertices both to their outgoing adjacent vertices. Therefore, the output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">432345564227569033</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075856168</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860911</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">432345564227569357</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">432345564227570524</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712984</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075861043</span><span class="o">]]</span>
</pre></div>
</div>
<p>which are the outgoing adjacent vertices of the two ‘person’ vertices.</p>
<p>It is more clear to understand if you keep person vertex’s info in the final output:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113784483, 216172782113784555).as(&quot;a&quot;)</span><span class="se">\</span>
<span class="s1">                 .out().as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                 .select(&quot;a&quot;, &quot;b&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># the first 4 elements are tuple of vertex(id=216172782113784483) and its outgoing adjacent vertex</span>
<span class="c1"># the last 4 elements are tuple of vertex(id=216172782113784555) and its outgoing adjacent vertex</span>
<span class="o">[{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">432345564227569033</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712472</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075856168</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784483</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860911</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784555</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">432345564227569357</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784555</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">432345564227570524</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784555</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151712984</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784555</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075861043</span><span class="o">]}]</span>
</pre></div>
</div>
<p>Generally, it is better to understand the expansion and traversal step from traverser’s aspect. Every expansion step actually map current traversers to another series traversers, and the complete traversal can be regarded as the transformations of traversers.  Let’s take <code class="docutils literal notranslate"><span class="pre">g.V().out().in()</span></code> as an example to explain it.</p>
<ul class="simple">
<li><p>At the very beginning, <code class="docutils literal notranslate"><span class="pre">g.V()</span></code> extracts all the vertices from the graph, and these vertices form the initial traversers: each traverser contains the corresponding vertex.</p></li>
<li><p>Then <code class="docutils literal notranslate"><span class="pre">out()</span></code> maps every traverser (vertex) to its outgoing adjacent vertices, and these outgoing adjacent vertices form the next series of traversers.</p></li>
<li><p>Finally, <code class="docutils literal notranslate"><span class="pre">in()</span></code> maps every traverser (vertex) to its incoming adjacent vertices, and these incoming adjacent vertices form the next series of traversers, and it is the final output of the Gremlin sentence.</p></li>
</ul>
<p>This figure illustrates the overview of the traverser transformation during the traversal of <code class="docutils literal notranslate"><span class="pre">g.V().out().in()</span></code>.</p>
<figure class="align-default" id="id16">
<a class="reference internal image-reference" href="../../_images/traversers_transformation_overview.png"><img alt="traversers_transformation_overview" src="../../_images/traversers_transformation_overview.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 16. The overview of traversers’ transformation.</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>In addition, this figure shows the details of the traverser’s change after every expansion step and <code class="docutils literal notranslate"><span class="pre">as(TAG)</span></code> step during the execution of Gremlin sentence <code class="docutils literal notranslate"><span class="pre">g.V().as('a').out().as('b').in().as('c')</span></code>.</p>
<figure class="align-default" id="id17">
<a class="reference internal image-reference" href="../../_images/traversers_transformation_details.png"><img alt="traversers_transformation_details" src="../../_images/traversers_transformation_details.png" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 17. The mapping details of the above traversers’ transformation.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="filter-expansion">
<h3>Filter &amp; Expansion<a class="headerlink" href="#filter-expansion" title="Permalink to this heading">¶</a></h3>
<section id="apply-filters-after-expansion">
<h4>Apply filters after expansion<a class="headerlink" href="#apply-filters-after-expansion" title="Permalink to this heading">¶</a></h4>
<p>In last tutorial, we have discussed that we can use <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> series of steps to apply filters to the extracted vertices and edges. Actually, these steps can be applied after expansion steps either that filter on the current traversers.</p>
<p>Still using <code class="docutils literal notranslate"><span class="pre">g.V().out().in()</span></code> as the example, if we hope that:</p>
<ul class="simple">
<li><p>The traversers(vertices) after <code class="docutils literal notranslate"><span class="pre">g.V()</span></code> has label ‘person’</p></li>
<li><p>The traversers(vertices) after the first expansion <code class="docutils literal notranslate"><span class="pre">out()</span></code> have property ‘browserUsed’ and the value is ‘Chrome’</p></li>
<li><p>The traversers(vertices) after the second expansion <code class="docutils literal notranslate"><span class="pre">in()</span></code> have property ‘length’ and the length is &lt; 5, and the label of the expansion edge is ‘replyOf’</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traversers(vertices) after g.V() has label &#39;person&#39;</span>
<span class="c1"># Traversers(vertices) after out() has property &#39;browserUsed&#39; and the value is &#39;Chrome&#39;</span>
<span class="c1"># Traversers(vertices) after in(&#39;replyOf&#39;) has property &#39;length&#39; and the length is &lt; 5</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;)</span><span class="se">\</span>
<span class="s1">                     .out().has(&quot;browserUsed&quot;, &quot;Chrome&quot;)</span><span class="se">\</span>
<span class="s1">                     .in(&quot;replyOf&quot;).has(&quot;length&quot;, lt(5))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">54336</span><span class="o">]</span>,<span class="w"> </span>...,<span class="w"> </span>v<span class="o">[</span><span class="m">33411</span><span class="o">]]</span>
</pre></div>
</div>
<p>Furthermore, for Gremlin sentences contain <code class="docutils literal notranslate"><span class="pre">as(TAG)</span></code> steps, we can introduce <code class="docutils literal notranslate"><span class="pre">where()</span></code> step to apply filters on traversers based on the tagged values.</p>
<p>Extend from previous example that we add tag ‘a’ and ‘b’ after the two <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> step:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;)</span><span class="se">\</span>
<span class="s1">                     .out().has(&quot;browserUsed&quot;, &quot;Chrome&quot;).as(&quot;a&quot;)</span><span class="se">\</span>
<span class="s1">                     .in(&quot;replyOf&quot;).has(&quot;length&quot;, lt(5)).as(&quot;b&quot;)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If we hope that the vertices of the tag ‘a’ and ‘b’ have the same property value on property ‘browserUsed’, we can add a <code class="docutils literal notranslate"><span class="pre">where</span></code> step and write the following Gremlin sentence in GIE:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Traversers(vertices) after g.V() has label &#39;person&#39;</span>
<span class="c1"># Traversers(vertices) after out() has property &#39;browserUsed&#39; and the value is &#39;Chrome&#39;</span>
<span class="c1"># Traversers(vertices) after in(&#39;replyOf&#39;) has property &#39;length&#39; and the length is &lt; 5</span>
<span class="c1"># vertex a and b have the same value of &#39;browserUsed&#39; property</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;)</span><span class="se">\</span>
<span class="s1">                     .out().has(&quot;browserUsed&quot;, &quot;Chrome&quot;).as(&quot;a&quot;)</span><span class="se">\</span>
<span class="s1">                     .in(&quot;replyOf&quot;).has(&quot;length&quot;, lt(5)).as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                     .where(&quot;b&quot;, eq(&quot;a&quot;)).by(&quot;browserUsed&quot;)</span><span class="se">\</span>
<span class="s1">                     .select(&quot;a&quot;, &quot;b&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189700805</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">59465</span><span class="o">]}</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">33403</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">33411</span><span class="o">]}]</span>
</pre></div>
</div>
</section>
<section id="expansion-as-filters">
<h4>Expansion as filters<a class="headerlink" href="#expansion-as-filters" title="Permalink to this heading">¶</a></h4>
<p>In addition, not only can we add filters after expansion steps, but also we can use expansion step as the filtering predicate with <code class="docutils literal notranslate"><span class="pre">where(...)</span></code> step. For example, if we want to extract all the vertices having at least 5 outgoing incident edges, we can write a Gremlin sentence with <code class="docutils literal notranslate"><span class="pre">where(...)</span></code> step as following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve vertices having at least 5 outgoing incident edges</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().where(outE().count().is(gte(5)))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
<section id="path-expansion-syntactic-sugar">
<h3>Path Expansion (Syntactic Sugar)<a class="headerlink" href="#path-expansion-syntactic-sugar" title="Permalink to this heading">¶</a></h3>
<p>Until now, we can use expansion steps, filter steps and auxiliary steps like <code class="docutils literal notranslate"><span class="pre">as(TAG)</span></code> to write complicated Gremlin sentences to traverse the graph. However, there are still two shortcomings:</p>
<ul class="simple">
<li><p>If we want to find a vertex which is 10-hop(edges) away from the current vertex, we need to write expansion step 10 times, which is very cost-ineffective.</p></li>
<li><p>The number of hops from the source to the destination is arbitrary. For example, if we want to find all vertices which can be reached from a source vertex within 3-hops, it cannot be solved by already introduced steps.</p></li>
</ul>
<p>Therefore, we would like to introduce path expansion to solve the two problems, which extends the expansion steps <code class="docutils literal notranslate"><span class="pre">out()</span></code>, <code class="docutils literal notranslate"><span class="pre">in()</span></code> and <code class="docutils literal notranslate"><span class="pre">both()</span></code> as the <a class="reference internal" href="supported_gremlin_steps.html"><span class="std std-doc">syntactic sugar</span></a>.</p>
<p>In the three expansion steps, you can now write as <code class="docutils literal notranslate"><span class="pre">out/in/both(lower..upper,</span> <span class="pre">label1,</span> <span class="pre">label2...)</span></code>, where <code class="docutils literal notranslate"><span class="pre">lower</span></code> is the minimum number of hops in the path, and <code class="docutils literal notranslate"><span class="pre">upper-1</span></code> is the maximum number of hops in the path. For example, <code class="docutils literal notranslate"><span class="pre">out(3..5)</span></code> means expansion through the outgoing edges 3 or 4 times. Therefore,  <code class="docutils literal notranslate"><span class="pre">lower</span> <span class="pre">&lt;=</span> <span class="pre">upper</span> <span class="pre">-</span> <span class="pre">1</span></code>, otherwise the sentence is illegal.</p>
<p>Path expansion is very flexible. Therefore, we design the <code class="docutils literal notranslate"><span class="pre">with()</span></code> step followed by path expansion step to provide two options for user to configure the corresponding behaviors of the path expansion step:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PATH_OPT</span></code>: Since path expansion allows expand the same step multiple times, it is likely to have duplicate vertices in the path. If the <code class="docutils literal notranslate"><span class="pre">PATH_OPT</span></code> is set to <code class="docutils literal notranslate"><span class="pre">ARBITRARY</span></code>, paths having duplicate vertices will be kept in the traversers; otherwise, if the <code class="docutils literal notranslate"><span class="pre">PATH_OPT</span></code> is set to <code class="docutils literal notranslate"><span class="pre">SIMPLE_PATH</span></code>, paths having duplicate vertices will be filtered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RESULT_OPT</span></code>: Sometimes, you may be interested in all the vertices in the path, but sometimes you may be only interested in the last vertex of the path. Therefore, when the <code class="docutils literal notranslate"><span class="pre">RESULT_OPT</span></code> is set to <code class="docutils literal notranslate"><span class="pre">ALL_V</span></code>, all the vertices in the path will be kept to the output. Instead, when the <code class="docutils literal notranslate"><span class="pre">RESULT_OPT</span></code> is set to <code class="docutils literal notranslate"><span class="pre">END_V</span></code>, only the last vertex of the path will be kept.</p></li>
</ul>
<p>At last, we would like to introduce <code class="docutils literal notranslate"><span class="pre">endV()</span></code> step in path expansion. Since a path may contain many vertices, all kept vertices are stored in a path collection by default. Therefore, <code class="docutils literal notranslate"><span class="pre">endV()</span></code> is used to unfold the path collection. For example, if the traversers after path expansion is <code class="docutils literal notranslate"><span class="pre">[[v[1],</span> <span class="pre">v[2],</span> <span class="pre">v[3]]</span></code>, where the inner <code class="docutils literal notranslate"><span class="pre">[v[1],</span> <span class="pre">v[2],</span> <span class="pre">v[3]]</span></code> is the path collection.   With the <code class="docutils literal notranslate"><span class="pre">endV()</span></code>, <code class="docutils literal notranslate"><span class="pre">v[1]</span></code>, <code class="docutils literal notranslate"><span class="pre">v[2]</span></code> and <code class="docutils literal notranslate"><span class="pre">v[3]</span></code> are picked out from the path collection, and the traversers becomes <code class="docutils literal notranslate"><span class="pre">[v[1],</span> <span class="pre">v[2],</span> <span class="pre">v[3]]</span></code></p>
<figure class="align-default" id="id18">
<a class="reference internal image-reference" href="../../_images/path_expansion_explanation.png"><img alt="path_expansion_explanation" src="../../_images/path_expansion_explanation.png" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 18. The examples of path expansion.</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="id1">
<h3>Real Applications<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>Graph traversal enables us to conduct more complicated data analytics on the graph.</p>
<p>For example, the path <code class="docutils literal notranslate"><span class="pre">comment-hasCreator-&gt;person-&gt;isLocatedIn-&gt;city-isPartOf-&gt;country</span></code> can help to determine the nationality of <code class="docutils literal notranslate"><span class="pre">comments</span></code>. Therefore,  we can calculate the histogram of comment length for comments from China easily with GIE:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphscope</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphscope.dataset.ldbc</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_ldbc</span>

<span class="c1"># load the modern graph as example.</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">()</span>

<span class="c1"># Hereafter, you can use the `graph` object to create an `gremlin` query session</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="c1"># Extract all comments&#39; contents in China</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).where(out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;).values(&quot;name&quot;).is(eq(&quot;China&quot;))).in(&quot;hasCreator&quot;).values(&quot;content&quot;)&#39;</span><span class="p">)</span>
<span class="n">comment_contents</span> <span class="o">=</span> <span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="n">comment_length</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">comment_content</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="k">for</span> <span class="n">comment_content</span> <span class="ow">in</span> <span class="n">comment_contents</span><span class="p">];</span>

<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="o">&lt;</span> <span class="mi">50</span><span class="p">),</span> <span class="n">comment_length</span><span class="p">)),</span> <span class="n">bins</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#607c8e&#39;</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Comments Length&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Comments Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Comment Length Histogram for comments from China&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id19">
<a class="reference internal image-reference" href="../../_images/comments_length_histogram_china.png"><img alt="comments_length_histogram_china" src="../../_images/comments_length_histogram_china.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 19. Comments length histogram in China.</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Or we can estimate the browser market share in Japan:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">graphscope</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gs</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphscope.dataset.ldbc</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_ldbc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span>


<span class="c1"># load the modern graph as example.</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">load_ldbc</span><span class="p">()</span>

<span class="c1"># Hereafter, you can use the `graph` object to create an `gremlin` query session</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">gs</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="c1"># Extract all person&#39; gender property value</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).where(out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;).values(&quot;name&quot;).is(eq(&quot;Japan&quot;))).in(&quot;hasCreator&quot;).values(&quot;browserUsed&quot;)&#39;</span><span class="p">)</span>
<span class="n">browsers_used</span> <span class="o">=</span> <span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="n">browser_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Firefox&#39;</span><span class="p">,</span> <span class="s1">&#39;Chrome&#39;</span><span class="p">,</span> <span class="s1">&#39;Internet Explorer&#39;</span><span class="p">,</span> <span class="s1">&#39;Safari&#39;</span><span class="p">]</span>
<span class="c1"># Count Firefox, Chrome, Internet Explorer and Safari</span>
<span class="n">browser_counts</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">browsers_used</span><span class="p">)</span>

<span class="c1"># Draw pie chart</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="n">browser_counts</span><span class="p">[</span><span class="n">browser</span><span class="p">]</span> <span class="k">for</span> <span class="n">browser</span> <span class="ow">in</span> <span class="n">browser_list</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="n">browser_list</span><span class="p">,</span> <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id20">
<a class="reference internal image-reference" href="../../_images/estimated_japan_browser_market_share.png"><img alt="estimated_japan_browser_market_share" src="../../_images/estimated_japan_browser_market_share.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 20. Estimated Japan Browser Market Share</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="pattern-match">
<h2>Pattern Match<a class="headerlink" href="#pattern-match" title="Permalink to this heading">¶</a></h2>
<p>Suppose you want to find two <code class="docutils literal notranslate"><span class="pre">persons</span></code> and the <code class="docutils literal notranslate"><span class="pre">universities</span></code> they <code class="docutils literal notranslate"><span class="pre">studyAt</span></code> in the graph that:</p>
<ol class="arabic simple">
<li><p>The two <code class="docutils literal notranslate"><span class="pre">person</span></code> <code class="docutils literal notranslate"><span class="pre">know</span></code> each other</p></li>
<li><p>The two <code class="docutils literal notranslate"><span class="pre">person</span></code> <code class="docutils literal notranslate"><span class="pre">studyAt</span></code> the same <code class="docutils literal notranslate"><span class="pre">university</span></code></p></li>
</ol>
<p>With the method taught previously , you can write the following code in GIE to achieve this purpose:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).as(&quot;person1&quot;).both(&quot;knows&quot;).as(&quot;person2&quot;)</span><span class="se">\</span>
<span class="s1">                     .select(&quot;person1&quot;).out(&quot;studyAt&quot;).as(&quot;university1&quot;)</span><span class="se">\</span>
<span class="s1">                     .select(&quot;person2&quot;).out(&quot;studyAt&quot;).as(&quot;university2&quot;)</span><span class="se">\</span>
<span class="s1">                     .where(&quot;university1&quot;, eq(&quot;university2&quot;))</span><span class="se">\</span>
<span class="s1">                     .select(&quot;person1&quot;, &quot;person2&quot;, &quot;university1&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<ul class="simple">
<li><p>First, you find all pairs of <code class="docutils literal notranslate"><span class="pre">person1</span></code> and <code class="docutils literal notranslate"><span class="pre">person2</span></code> who know each other.</p></li>
<li><p>Then, you find <code class="docutils literal notranslate"><span class="pre">person1</span></code>’s university as <code class="docutils literal notranslate"><span class="pre">university1</span></code> and <code class="docutils literal notranslate"><span class="pre">person2</span></code>’s university as <code class="docutils literal notranslate"><span class="pre">university2</span></code>.</p></li>
<li><p>Next, you use the <code class="docutils literal notranslate"><span class="pre">where(...)</span></code> step to check whether <code class="docutils literal notranslate"><span class="pre">university1</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">university2</span></code> and filter out those that are not equal.</p></li>
<li><p>Finally, you use the <code class="docutils literal notranslate"><span class="pre">select(...)</span></code> step to project <code class="docutils literal notranslate"><span class="pre">person1</span></code>, <code class="docutils literal notranslate"><span class="pre">person2</span></code>, and <code class="docutils literal notranslate"><span class="pre">university1</span></code> (now <code class="docutils literal notranslate"><span class="pre">university1</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">university2</span></code>).</p></li>
</ul>
<p>The output of should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Person1 and 2 know each other and study at the same university</span>
<span class="o">[{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784481</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784279</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858884</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784361</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784291</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784642</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784291</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784473</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784328</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858700</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784700</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784331</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860619</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784375</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784333</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858813</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784593</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784361</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784642</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784361</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784291</span><span class="o">]</span>,
...
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784688</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860870</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784047</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784692</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075862429</span><span class="o">]}]</span>
</pre></div>
</div>
<p>Actually, such kind of problem is called graph pattern matching. It means, you define a pattern at first. The pattern can be either described by the natural language:</p>
<ul class="simple">
<li><p>“Find two <code class="docutils literal notranslate"><span class="pre">persons</span></code> and the <code class="docutils literal notranslate"><span class="pre">universities</span></code> they <code class="docutils literal notranslate"><span class="pre">studyAt</span></code> in the graph that the two <code class="docutils literal notranslate"><span class="pre">person</span></code> <code class="docutils literal notranslate"><span class="pre">know</span></code> each other and the two <code class="docutils literal notranslate"><span class="pre">person</span></code> <code class="docutils literal notranslate"><span class="pre">studyAt</span></code> the same <code class="docutils literal notranslate"><span class="pre">university</span></code>”</p></li>
</ul>
<p>or can be illustrated as a graph pattern as shown in the following.</p>
<figure class="align-default" id="id21">
<a class="reference internal image-reference" href="../../_images/pattern_person_person_university.png"><img alt="pattern_person_person_university" src="../../_images/pattern_person_person_university.png" style="width: 35%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 21. Pattern: two person know each other and study at the same university.</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Then you aim to find all the matched subgraphs that are <a class="reference external" href="https://en.wikipedia.org/wiki/Graph_isomorphism">isomorphic</a> to the pattern. Under graph isomorphism, a subgraph and the pattern are matched if, when there is an edge between vertices in the pattern, there is an equivalent edge between two matched vertices in the subgraph. In addition, a vertex in the subgraph cannot match multiple pattern vertices.</p>
<p>For example, this is a local graph of university vertex(id = 144115188075858884) in the LDBC Graph:</p>
<figure class="align-default" id="id22">
<a class="reference internal image-reference" href="../../_images/local_person_person_university.png"><img alt="local_person_person_university" src="../../_images/local_person_person_university.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 22. Local graph of a university vertex.</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>and here are the matched subgraphs in this local graph:</p>
<figure class="align-default" id="id23">
<a class="reference internal image-reference" href="../../_images/matched_person_person_university.png"><img alt="matched_person_person_university" src="../../_images/matched_person_person_university.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 23. Three matched subgraphs in the local graph.</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The matched instances in the local graph are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{person1:</span> <span class="pre">v[216172782113784192],</span> <span class="pre">person2:</span> <span class="pre">v[216172782113784107],</span> <span class="pre">university:</span> <span class="pre">v[144115188075858884]}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{person1:</span> <span class="pre">v[216172782113784107],</span> <span class="pre">person2:</span> <span class="pre">v[216172782113784192],</span> <span class="pre">university:</span> <span class="pre">v[144115188075858884]}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{person1:</span> <span class="pre">v[216172782113784107],</span> <span class="pre">person2:</span> <span class="pre">v[216172782113784279],</span> <span class="pre">university:</span> <span class="pre">v[144115188075858884]}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{person1:</span> <span class="pre">v[216172782113784279],</span> <span class="pre">person2:</span> <span class="pre">v[216172782113784107],</span> <span class="pre">university:</span> <span class="pre">v[144115188075858884]}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{person1:</span> <span class="pre">v[216172782113784279],</span> <span class="pre">person2:</span> <span class="pre">v[216172782113784171],</span> <span class="pre">university:</span> <span class="pre">v[144115188075858884]}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{person1:</span> <span class="pre">v[216172782113784171],</span> <span class="pre">person2:</span> <span class="pre">v[216172782113784279],</span> <span class="pre">university:</span> <span class="pre">v[144115188075858884]}</span></code></p></li>
</ul>
<p>There are a total of 6 matched instances (compared to 3 subgraphs) because changing the position of <code class="docutils literal notranslate"><span class="pre">person1</span></code> and <code class="docutils literal notranslate"><span class="pre">person2</span></code> leads to a new matched instance.</p>
<p>As shown at the beginning of this section, you can write a regular Gremlin query to conduct pattern matching. However, it has two shortcomings:</p>
<ol class="arabic simple">
<li><p>The query sentence is complex. If you write such a long query sentence for this simple triangle pattern, what about more complicated patterns like squares, butterflies, or cliques?</p></li>
<li><p>There’s almost no optimization. The speed of pattern matching largely depends on how you write the query sentence.</p></li>
</ol>
<p>To solve these two problems, GIE supports the <code class="docutils literal notranslate"><span class="pre">match(...)</span></code> step in Gremlin, which is specifically designed for pattern matching.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">match()</span></code> step provides a more declarative form of graph querying based on the notion of pattern matching:</p>
<ul class="simple">
<li><p>Every <code class="docutils literal notranslate"><span class="pre">match()</span></code> step is a collection of <code class="docutils literal notranslate"><span class="pre">sentences</span></code>, and every <code class="docutils literal notranslate"><span class="pre">sentence</span></code> is a regular Gremlin traverser sentence but starts and ends with given tags.</p></li>
<li><p>Then, GIE uses the underlying MatchAnalyticsAlgorithm to connect all the <code class="docutils literal notranslate"><span class="pre">sentences</span></code> together to form a pattern structure based on those start and end tags.</p></li>
<li><p>Finally, GIE applies its MatchOptimizationAlgorithm to generate an optimized matching strategy for the formed pattern and conduct the pattern matching.</p></li>
</ul>
<p>Therefore, it is much more efficient to solve pattern matching problems using Gremlin’s built-in <code class="docutils literal notranslate"><span class="pre">match()</span></code> step.</p>
<p>As for the pattern shown at the beginning of this section (two persons who know each other and study at the same university), you can write the following code in GIE using the <code class="docutils literal notranslate"><span class="pre">match()</span></code> step:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Person1 and 2 know each other and study at the same university</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().match(__.as(&quot;person1&quot;).both(&quot;knows&quot;).as(&quot;person2&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;person1&quot;).out(&quot;studyAt&quot;).as(&quot;university&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;person2&quot;).out(&quot;studyAt&quot;).as(&quot;university&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be the same as the previous self-written pattern matching sentences:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784361</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784291</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784642</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784291</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784375</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784333</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858813</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784593</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784361</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784642</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784361</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858879</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784587</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784363</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075860919</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784532</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784400</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075861858</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784491</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784401</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858086</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784598</span><span class="o">]</span>,
...
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784629</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858881</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;person2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783931</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;person1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784657</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;university&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075858708</span><span class="o">]}]</span>
</pre></div>
</div>
<p>Let’s present a more complex pattern matching example: we want to find two <code class="docutils literal notranslate"><span class="pre">persons</span></code> A and B such that:</p>
<ul class="simple">
<li><p>they know each other</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">person</span></code> A creates a <code class="docutils literal notranslate"><span class="pre">message</span></code>, which is replied to by a <code class="docutils literal notranslate"><span class="pre">comment</span></code> created by <code class="docutils literal notranslate"><span class="pre">person</span></code> B</p></li>
</ul>
<p>This figure illustrates the pattern:</p>
<figure class="align-default" id="id24">
<a class="reference internal image-reference" href="../../_images/bi19_right_lower_corner.png"><img alt="bi19_right_lower_corner" src="../../_images/bi19_right_lower_corner.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 24. Pattern: two person know each other, and one person creates a comment replying a message created by the other.</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>We can easily match this pattern with Gremlin <code class="docutils literal notranslate"><span class="pre">match(...)</span></code> step:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pA and pB know each other</span>
<span class="c1"># pB create a comment that reply a message created by pA</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().match(__.as(&quot;pA&quot;).both(&quot;knows&quot;).as(&quot;pB&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;pA&quot;).in(&quot;hasCreator&quot;).as(&quot;m&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;pB&quot;).in(&quot;hasCreator&quot;).as(&quot;c&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;c&quot;).out(&quot;replyOf&quot;).as(&quot;m&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">3</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640007</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">4</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640007</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">5</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640007</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">13</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640007</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">18</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640007</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">19</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640007</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">22</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640008</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">27</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640008</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">29</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640009</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">34</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640009</span><span class="o">]</span>,<span class="w"> </span>......,<span class="w"> </span><span class="o">}]</span>
</pre></div>
</div>
<p>Note that every match sentence inside the <code class="docutils literal notranslate"><span class="pre">match(...)</span></code> step supports filter steps and path expands. For example, if you hope that the <code class="docutils literal notranslate"><span class="pre">knows</span></code> edge is a <code class="docutils literal notranslate"><span class="pre">1..3</span></code> multi-hop, and the <code class="docutils literal notranslate"><span class="pre">message</span></code> and <code class="docutils literal notranslate"><span class="pre">comment</span></code> are created after 2012-01-01, you can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># pA and pB know each other</span>
<span class="c1"># pB create a comment that reply a message created by pA</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().match(__.as(&quot;pA&quot;).both(&quot;1..3&quot;, &quot;knows&quot;).as(&quot;pB&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;pA&quot;).in(&quot;hasCreator&quot;).has(&quot;creationDate&quot;, gt(&quot;2012-01-01&quot;)).as(&quot;m&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;pB&quot;).in(&quot;hasCreator&quot;).has(&quot;creationDate&quot;, gt(&quot;2012-01-01&quot;)).as(&quot;c&quot;),</span><span class="se">\</span>
<span class="s1">                       __.as(&quot;c&quot;).out(&quot;replyOf&quot;).as(&quot;m&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783812</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783882</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">36</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640010</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783812</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783882</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">37</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640010</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783812</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784105</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">38</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640010</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783812</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783882</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">41</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640010</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784105</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783882</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">43</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">42</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783814</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783962</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">50</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640135</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783814</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784171</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">52</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640135</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784481</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784199</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">54</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">49</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783814</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784038</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">56</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640135</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;pA&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783816</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;pB&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784144</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">175</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;m&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">360287970189640462</span><span class="o">]</span>,<span class="w"> </span>......,<span class="w"> </span><span class="o">}]</span>
</pre></div>
</div>
</section>
<section id="relational-operations">
<h2>Relational Operations<a class="headerlink" href="#relational-operations" title="Permalink to this heading">¶</a></h2>
<p>Then we would like to introduce more relational operations of Gremlin steps that GIE supports.</p>
<section id="filter-steps">
<h3>Filter Steps<a class="headerlink" href="#filter-steps" title="Permalink to this heading">¶</a></h3>
<section id="hasid">
<h4><code class="docutils literal notranslate"><span class="pre">hasId()</span></code><a class="headerlink" href="#hasid" title="Permalink to this heading">¶</a></h4>
<p>In previous tutorial, we have introduced that you can use <code class="docutils literal notranslate"><span class="pre">g.V(id)</span></code> to pick out the vertex having specific required global id from the graph. But, what if we want to apply filters based on global id during the traversal?</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">hasId(id)</span></code> step to achieve the purpose. For example, if you want the expanded vertex exactly having global id 144115188075861858, you can write the following codes in GIE:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().out().hasId(144115188075861858)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="p">)</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">144115188075861858</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075861858</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075861858</span><span class="o">]]</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">hasId(id)</span></code> is different from <code class="docutils literal notranslate"><span class="pre">has('id',</span> <span class="pre">id)</span></code>! As mentioned before, <code class="docutils literal notranslate"><span class="pre">hasId(id)</span></code> apply filter based on the global id, while <code class="docutils literal notranslate"><span class="pre">has('id',</span> <span class="pre">id)</span></code> apply filter based on the local id. For example, if you write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().has(&quot;id&quot;, 0)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">72057594037927936</span><span class="o">]</span>,
<span class="w"> </span>v<span class="o">[</span><span class="m">144115188075855872</span><span class="o">]</span>,
<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711744</span><span class="o">]</span>,
<span class="w"> </span>v<span class="o">[</span><span class="m">432345564227567616</span><span class="o">]</span>,
<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495555</span><span class="o">]]</span>
</pre></div>
</div>
<p>which are all the vertices whose local id is 0.</p>
</section>
<section id="where">
<h4><code class="docutils literal notranslate"><span class="pre">where()</span></code><a class="headerlink" href="#where" title="Permalink to this heading">¶</a></h4>
<p>In previous tutorial, we have introduced that <code class="docutils literal notranslate"><span class="pre">where()</span></code> step in Gremlin sentences having <code class="docutils literal notranslate"><span class="pre">as()</span></code> steps can be used to filter traversers based on the tagged values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># vertex tagged as &#39;a&#39; should be the same as vertex &#39;tagged&#39; as b</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113783808).as(&quot;a&quot;)</span><span class="se">\</span>
<span class="s1">                 .out(&quot;knows&quot;).in(&quot;knows&quot;).as(&quot;b&quot;).where(&quot;b&quot;, P.eq(&quot;a&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]]</span>
</pre></div>
</div>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">where()</span></code> step can be followed by a <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> step to provide much more powerful functionalities: the selected entities may not need to compare themselves, but compare their properties.</p>
<p>For example, the following Gremlin sentence require vertex ‘a’ and ‘b’ having the value on same ‘firstName’ :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># vertex tagged as &#39;a&#39; and &#39;b&#39; should have the same property &#39;name&#39;</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113783808).as(&quot;a&quot;).out(&quot;knows&quot;).in(&quot;knows&quot;).as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                 .where(&quot;b&quot;, P.eq(&quot;a&quot;)).by(&quot;firstName&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should also be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]]</span>
</pre></div>
</div>
<p>In addition, if you hope that vertex ‘a’ and ‘b’ having the same output degree, you can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># vertex tagged as &#39;a&#39; and &#39;b&#39; should have the output degree</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(216172782113783808).as(&quot;a&quot;).out(&quot;knows&quot;).in(&quot;knows&quot;).as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                 .where(&quot;b&quot;, P.eq(&quot;a&quot;)).by(out().count())&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># v[216172782113784171] is not v[216172782113783808](the source vertex),</span>
<span class="c1"># but have the same output degree</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784171</span><span class="o">]]</span>
</pre></div>
</div>
</section>
<section id="dedup">
<h4><code class="docutils literal notranslate"><span class="pre">dedup()</span></code><a class="headerlink" href="#dedup" title="Permalink to this heading">¶</a></h4>
<p>Suppose that you are interested in how many forums having members from India, and you may write the following Gremlin sentence in GIE:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Aim to count how may forums have members from India</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;place&quot;).has(&quot;name&quot;, &quot;India&quot;)</span><span class="se">\</span>
<span class="s1">                 .in(&quot;isPartOf&quot;).in(&quot;isLocatedIn&quot;).in(&quot;hasMember&quot;).count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output is <code class="docutils literal notranslate"><span class="pre">[8248]</span></code>. It seems to have no problem. However, how many forums are there in the graph?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count how many forums are there in the graph</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;forum&quot;).count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output is <code class="docutils literal notranslate"><span class="pre">[8101]</span></code>. Here comes the problem: the number of forums having members from India is even larger than the total number of forums. It is impossible! Actually,  when we count how many forums having members from India with previous graph traversal, the last step <code class="docutils literal notranslate"><span class="pre">.in(\'hasMember\')</span></code> will lead to many duplicates, because it is very common for different people to join the same forum.</p>
<p>Therefore, <code class="docutils literal notranslate"><span class="pre">dedup()</span></code> step is designed to remove the duplicates among traversers. After we add the <code class="docutils literal notranslate"><span class="pre">dedup()</span></code> step before the <code class="docutils literal notranslate"><span class="pre">count()</span></code>, the statistics result is back to normal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count how may forums have members from India</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;place&quot;).has(&quot;name&quot;, &quot;India&quot;)</span><span class="se">\</span>
<span class="s1">                 .in(&quot;isPartOf&quot;).in(&quot;isLocatedIn&quot;).in(&quot;hasMember&quot;).dedup().count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output is <code class="docutils literal notranslate"><span class="pre">[2822]</span></code>.</p>
<p>For Gremlin sentence containing <code class="docutils literal notranslate"><span class="pre">as()</span></code> step, we can also <code class="docutils literal notranslate"><span class="pre">dedup(TAG)</span></code> remove duplicates according to specific tagged entities. For example, the following  Gremlin sentence also counts how may forums have members from India, but the traverser starts from <code class="docutils literal notranslate"><span class="pre">forum</span></code>. To remove the duplicates, we <code class="docutils literal notranslate"><span class="pre">dedup('a')</span></code>, where ‘a’ is the tagged<code class="docutils literal notranslate"><span class="pre">forum</span></code> vertices.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count how may forums have members from India</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;forum&quot;).as(&quot;a&quot;).out(&quot;hasMember&quot;)</span><span class="se">\</span>
<span class="s1">                     .out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;).has(&quot;name&quot;, &quot;India&quot;)</span><span class="se">\</span>
<span class="s1">                     .dedup(&quot;a&quot;).count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is also <code class="docutils literal notranslate"><span class="pre">[2822]</span></code>.</p>
<p>In addition, we can <code class="docutils literal notranslate"><span class="pre">dedup(TAG1,</span> <span class="pre">TAG2,</span> <span class="pre">...)</span></code> to remove duplicates by the composition of several tagged entires. For example, the following Gremlin sentence counts there are how many different related <code class="docutils literal notranslate"><span class="pre">(country,</span> <span class="pre">forum)</span></code> pairs in the graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count how many different related (country, forum) pairs in the graph</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;place&quot;).as(&quot;a&quot;)</span><span class="se">\</span>
<span class="s1">                 .in(&quot;isPartOf&quot;).in(&quot;isLocatedIn&quot;)</span><span class="se">\</span>
<span class="s1">                 .in(&quot;hasMember&quot;).as(&quot;b&quot;).dedup(&quot;a&quot;, &quot;b&quot;).count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output is <code class="docutils literal notranslate"><span class="pre">[37164]</span></code></p>
<p>Furthermore, just like previously introduced <code class="docutils literal notranslate"><span class="pre">where()</span></code> step, we can add <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> after <code class="docutils literal notranslate"><span class="pre">dedup(...)</span></code> step to remove duplicates based on the property values. For example, if you want to count there are how many different <code class="docutils literal notranslate"><span class="pre">firstNames</span></code> of <code class="docutils literal notranslate"><span class="pre">persons</span></code> in the graph, you can write in GIE as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count how many different firstName are there in the graph</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).dedup().by(&quot;firstName&quot;).count()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="p">)</span>
</pre></div>
</div>
<p>The output should be <code class="docutils literal notranslate"><span class="pre">[432]</span></code>.</p>
</section>
</section>
<section id="project-steps">
<h3>Project Steps<a class="headerlink" href="#project-steps" title="Permalink to this heading">¶</a></h3>
<section id="id-and-label">
<h4><code class="docutils literal notranslate"><span class="pre">id()</span></code> and <code class="docutils literal notranslate"><span class="pre">label()</span></code><a class="headerlink" href="#id-and-label" title="Permalink to this heading">¶</a></h4>
<p>In previous tutorial, we have taught to use <code class="docutils literal notranslate"><span class="pre">values(PROPERTY)</span></code> to project an entity (vertex or edge) to its property’s value. However, to extract the global id and label, we may need to separate steps: <code class="docutils literal notranslate"><span class="pre">id()</span></code> and <code class="docutils literal notranslate"><span class="pre">label()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get vertex(id=72057594037927936) ’s id</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(72057594037927936).id()&#39;</span><span class="p">)</span>
<span class="c1"># Get vertices(label=&#39;person&#39;)&#39;s label</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).label()&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ID</span>
<span class="o">[</span><span class="m">72057594037927936</span><span class="o">]</span>
<span class="c1"># Labels</span>
<span class="o">[</span><span class="m">3</span>,<span class="w"> </span>...,<span class="w"> </span><span class="m">3</span><span class="o">]</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">id()</span></code> step is not equivalent to <code class="docutils literal notranslate"><span class="pre">values(&quot;id&quot;)</span></code>, where the latter one project an entity (vertex or edge) to its local id! For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get vertex(id=72057594037927936) ’s local id</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V(72057594037927936).values(&quot;id&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output is <code class="docutils literal notranslate"><span class="pre">[0]</span></code></p>
</section>
<section id="constant">
<h4><code class="docutils literal notranslate"><span class="pre">constant()</span></code><a class="headerlink" href="#constant" title="Permalink to this heading">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">constant()</span></code> step is meant to map any object to a fixed object value. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Map all the vertices to 1</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().constant(1)&#39;</span><span class="p">)</span>
<span class="c1"># Map all the vertices to &quot;marko&quot;</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().constant(&quot;marko&quot;)&#39;</span><span class="p">)</span>
<span class="c1"># Map all the vertices to 1.0</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().constant(1.0)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1s</span>
<span class="o">[</span><span class="m">1</span>,<span class="w"> </span>...,<span class="w"> </span><span class="m">1</span><span class="o">]</span>
<span class="c1"># &quot;markos&quot;</span>
<span class="o">[</span><span class="s2">&quot;marko&quot;</span>,<span class="w"> </span>...,<span class="w"> </span><span class="s2">&quot;marko&quot;</span><span class="o">]</span>
<span class="c1"># 1.0s</span>
<span class="o">[</span><span class="m">1</span>.0,<span class="w"> </span>...,<span class="w"> </span><span class="m">1</span>.0<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="valuemap">
<h4><code class="docutils literal notranslate"><span class="pre">valueMap()</span></code><a class="headerlink" href="#valuemap" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">value(PROPERTY)</span></code> step can only map an entity(vertex or edge) to one of its property’s value. What if we want to extract many properties’s value at the same time?</p>
<p><code class="docutils literal notranslate"><span class="pre">valueMap(PROPERTY1,</span> <span class="pre">PROPERTY2,</span> <span class="pre">...)</span></code> step provides such ability. For example, the following code extracts <code class="docutils literal notranslate"><span class="pre">person</span></code> vertices’ <code class="docutils literal notranslate"><span class="pre">firstName</span></code> and <code class="docutils literal notranslate"><span class="pre">lastName</span></code> together by <code class="docutils literal notranslate"><span class="pre">valueMap(...)</span></code> step.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract person vertices&#39; firstName and lastName</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).valueMap(&quot;firstName&quot;, &quot;lastName&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;lastName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Donati&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;firstName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Luigi&#39;</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;lastName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Hall&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;firstName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;S. N.&#39;</span><span class="o">]}</span>,
......
,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;lastName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Costa&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;firstName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Carlos&#39;</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;lastName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Khan&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;firstName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Meera&#39;</span><span class="o">]}]</span>
</pre></div>
</div>
</section>
<section id="select">
<h4><code class="docutils literal notranslate"><span class="pre">select()</span></code><a class="headerlink" href="#select" title="Permalink to this heading">¶</a></h4>
<p>As introduced previously, for a Gremlin sentence containing <code class="docutils literal notranslate"><span class="pre">as()</span></code> step, we can use <code class="docutils literal notranslate"><span class="pre">select(TAG1,</span> <span class="pre">TAG2,</span> <span class="pre">...)</span></code> step to extract the tagged entities we want. Just as <code class="docutils literal notranslate"><span class="pre">where()</span></code> and <code class="docutils literal notranslate"><span class="pre">dedup()</span></code> step, we can add a <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> step after it to further extract the property’s value of the tagged entities.</p>
<p>For example, the following Gremlin sentence picked the tagged ‘a’ vertex’s <code class="docutils literal notranslate"><span class="pre">firstName</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract tagged &#39;a&#39; vertex&#39;s firstName</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).as(&quot;a&quot;).select(&quot;a&quot;).by(&quot;firstName&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="s1">&#39;Mahinda&#39;</span>,<span class="w"> </span><span class="s1">&#39;Eli&#39;</span>,<span class="w"> </span><span class="s1">&#39;Joseph&#39;</span>,...<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
<p>Actually, contents inside the <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> step can be a sub-traversal. For example, the following Gremlin sentence extract tagged ‘a’ vertex’s out degree.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract tagged &#39;a&#39; vertex&#39;s out degree</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).as(&quot;a&quot;).select(&quot;a&quot;).by(out().count())&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">36</span>,<span class="w"> </span><span class="m">12</span>,<span class="w"> </span><span class="m">94</span>,<span class="w"> </span><span class="m">228</span>,<span class="w"> </span>...<span class="o">]</span>
</pre></div>
</div>
<p>In addition, if you want to extract multiple properties’ values of the  tagged vertices, you can embed <code class="docutils literal notranslate"><span class="pre">valueMap(TAG1,</span> <span class="pre">TAG2,</span> <span class="pre">...)</span></code> step inside the <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> step. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract tagged &#39;a&#39; vertex&#39;s firstName and lastName</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).as(&quot;a&quot;).select(&quot;a&quot;).by(valueMap(&quot;firstName&quot;, &quot;lastName&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;lastName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Donati&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;firstName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Luigi&#39;</span><span class="o">]}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;lastName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Hall&#39;</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;firstName&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;S. N.&#39;</span><span class="o">]}</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
<p>Furthermore, if you want to add <code class="docutils literal notranslate"><span class="pre">by()</span></code> step after <code class="docutils literal notranslate"><span class="pre">select(TAG1,</span> <span class="pre">TAG2,</span> <span class="pre">...)</span></code> which contains multiple tags, assume the tags number is <span class="math notranslate nohighlight">\(n\)</span>, you should add <span class="math notranslate nohighlight">\(n\)</span> <code class="docutils literal notranslate"><span class="pre">by()</span></code> steps after the <code class="docutils literal notranslate"><span class="pre">select(...)</span></code> step, and the <span class="math notranslate nohighlight">\(i^{th}\)</span> <code class="docutils literal notranslate"><span class="pre">by()</span></code> step corresponds to the <span class="math notranslate nohighlight">\(i^{th}\)</span> tag. For example,  if you want to extract vertex ‘a’s <code class="docutils literal notranslate"><span class="pre">firstName</span></code> and vertex ‘b’s <code class="docutils literal notranslate"><span class="pre">lastName</span></code>, you can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract vertex &#39;a&#39;s firstName and vertex &#39;b&#39;s lastName</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).as(&quot;a&quot;).out(&quot;knows&quot;).as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                 .select(&quot;a&quot;, &quot;b&quot;).by(&quot;firstName&quot;).by(&quot;lastName&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span><span class="s1">&#39;Luigi&#39;</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span><span class="s1">&#39;Dom Pedro II&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span><span class="s1">&#39;Luigi&#39;</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span><span class="s1">&#39;Condariuc&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span><span class="s1">&#39;Luigi&#39;</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span><span class="s1">&#39;Bonomi&#39;</span><span class="o">}</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
<p>Note that, if <code class="docutils literal notranslate"><span class="pre">select(TAG1,</span> <span class="pre">TAG2...)</span></code> step containing <span class="math notranslate nohighlight">\(n\)</span> tags has <code class="docutils literal notranslate"><span class="pre">by()</span></code> step followed, then it must be <span class="math notranslate nohighlight">\(n\)</span> <code class="docutils literal notranslate"><span class="pre">by()</span></code> steps. For some tagged entities, even if we don’t want to project them to anything, we have to give them a corresponding empty <code class="docutils literal notranslate"><span class="pre">by()</span></code> step. For example, the following code only project vertex ‘b’ to its <code class="docutils literal notranslate"><span class="pre">lastName</span></code> but leave vertex ‘a’ as it is.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># extract vertex &#39;a&#39; and vertex &#39;b&#39;s lastName</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).as(&quot;a&quot;).out(&quot;knows&quot;).as(&quot;b&quot;)</span><span class="se">\</span>
<span class="s1">                 .select(&quot;a&quot;, &quot;b&quot;).by().by(&quot;lastName&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span><span class="s1">&#39;David&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span><span class="s1">&#39;Silva&#39;</span><span class="o">}</span>,<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span><span class="s1">&#39;Guliyev&#39;</span><span class="o">}</span>,...,<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
</section>
</section>
<section id="aggregate-steps">
<h3>Aggregate Steps<a class="headerlink" href="#aggregate-steps" title="Permalink to this heading">¶</a></h3>
<section id="fold">
<h4><code class="docutils literal notranslate"><span class="pre">fold()</span></code><a class="headerlink" href="#fold" title="Permalink to this heading">¶</a></h4>
<p>Gremlin sentences always generate output containing many traversers. <code class="docutils literal notranslate"><span class="pre">fold()</span></code> step can roll up these traversers into an aggregate list. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Roll up the TagClass vertices into an aggregate list</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;tagClass&quot;).fold()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[[</span>v<span class="o">[</span><span class="m">504403158265495552</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495553</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495554</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495555</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495556</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495557</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495558</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495559</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495560</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495561</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495562</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495563</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495564</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495565</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495566</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495567</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495568</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495569</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495570</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495571</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495572</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495573</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495574</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495575</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495576</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495577</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495578</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495579</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495580</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495581</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495582</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495583</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495584</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495585</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495586</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495587</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495588</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495589</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495590</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495591</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495592</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495593</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495594</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495595</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495596</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495597</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495598</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495599</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495600</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495601</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495602</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495603</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495604</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495605</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495606</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495607</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495608</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495609</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495610</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495611</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495612</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495613</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495614</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495615</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495616</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495617</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495618</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495619</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495620</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495621</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">504403158265495622</span><span class="o">]]]</span>
</pre></div>
</div>
</section>
<section id="sum-min-max-and-mean">
<h4><code class="docutils literal notranslate"><span class="pre">sum()</span></code>, <code class="docutils literal notranslate"><span class="pre">min()</span></code>, <code class="docutils literal notranslate"><span class="pre">max()</span></code> and  <code class="docutils literal notranslate"><span class="pre">mean()</span></code><a class="headerlink" href="#sum-min-max-and-mean" title="Permalink to this heading">¶</a></h4>
<p>Assume you have already projected the traversers into a series of numbers, you can use <code class="docutils literal notranslate"><span class="pre">sum()</span></code>, <code class="docutils literal notranslate"><span class="pre">min()</span></code>, <code class="docutils literal notranslate"><span class="pre">max()</span></code> and <code class="docutils literal notranslate"><span class="pre">mean()</span></code> step to conduct some further analysis on these values. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the sum of all vertex&#39;s out degree</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().as(&quot;a&quot;).select(&quot;a&quot;).by(out().count()).sum()&#39;</span><span class="p">)</span>
<span class="c1"># Get the minimum of vertex&#39;s out degree</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().as(&quot;a&quot;).select(&quot;a&quot;).by(out().count()).min()&#39;</span><span class="p">)</span>
<span class="c1"># Get the maximum of vertex&#39;s out degree</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().as(&quot;a&quot;).select(&quot;a&quot;).by(out().count()).max()&#39;</span><span class="p">)</span>
<span class="c1"># Get the mean of vertex&#39;s out degree</span>
<span class="n">q4</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().as(&quot;a&quot;).select(&quot;a&quot;).by(out().count()).mean()&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q4</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="m">787074</span><span class="o">]</span>
<span class="o">[</span><span class="m">0</span><span class="o">]</span>
<span class="o">[</span><span class="m">690</span><span class="o">]</span>
<span class="o">[</span><span class="m">4</span>.134313148716225<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="group">
<h4><code class="docutils literal notranslate"><span class="pre">group()</span></code><a class="headerlink" href="#group" title="Permalink to this heading">¶</a></h4>
<p>It is a very common need to divide traversers into different groups according to some values or conditions, called group keys.  Gremlin provides <code class="docutils literal notranslate"><span class="pre">group()</span></code> step to achieve this purpose.</p>
<p>The group key should be contained in the <code class="docutils literal notranslate"><span class="pre">by()</span></code> step following the <code class="docutils literal notranslate"><span class="pre">group()</span></code> step. The group key can be either a:</p>
<ul class="simple">
<li><p>Property name</p></li>
<li><p>sub-traversal sentence which will generate a single value</p></li>
</ul>
<p>For example, if you want to divide the <code class="docutils literal notranslate"><span class="pre">person</span></code> vertices into <code class="docutils literal notranslate"><span class="pre">male</span></code> group and <code class="docutils literal notranslate"><span class="pre">female</span></code> group according to their <code class="docutils literal notranslate"><span class="pre">gender</span></code>, you can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Divide person vertices into male group and female group according to their gender</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).group().by(&quot;gender&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;male&#39;</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783811</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783813</span><span class="o">]</span>,<span class="w"> </span>...<span class="o">]</span>
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;female&#39;</span>:<span class="w"> </span><span class="o">[</span>...,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784707</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784708</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784709</span><span class="o">]]]</span>
</pre></div>
</div>
<p>You can also divide the vertices into groups according to their out degrees that the vertices belongs to the same group having the same out degree:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># divide the vertices into groups according to their out degrees</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).group().by(out().count())&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="m">11</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783910</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784104</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784207</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784318</span><span class="o">]]</span>,
<span class="w">  </span><span class="m">24</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784305</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784597</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784693</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784018</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784092</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784108</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784161</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784162</span><span class="o">]]</span>,
<span class="w">  </span><span class="m">73</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783875</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783932</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784057</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784068</span><span class="o">]</span><span class="w"> </span>......<span class="o">}]</span>
</pre></div>
</div>
<p>What it there’s no <code class="docutils literal notranslate"><span class="pre">by()</span></code> step following <code class="docutils literal notranslate"><span class="pre">group()</span></code> step or the content of <code class="docutils literal notranslate"><span class="pre">by()</span></code> step is empty? Facing such scenario, GIE will group the traversers by the current value, e.g., the vertex itself:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group the vertices by the vertex itself</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).group()&#39;</span><span class="p">)</span> <span class="c1"># same for &#39;g.V().hasLabel(&quot;person&quot;).group().by()&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span>v<span class="o">[</span><span class="m">216172782113784065</span><span class="o">]</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784065</span><span class="o">]]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784235</span><span class="o">]</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784235</span><span class="o">]]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784247</span><span class="o">]</span>:<span class="w"> </span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784247</span><span class="o">]]</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">}]</span>
</pre></div>
</div>
<p>Therefore, it is strongly suggested to add meaningful group key in the <code class="docutils literal notranslate"><span class="pre">by()</span></code> step following <code class="docutils literal notranslate"><span class="pre">group()</span></code> step.</p>
</section>
<section id="groupcount">
<h4><code class="docutils literal notranslate"><span class="pre">groupCount()</span></code><a class="headerlink" href="#groupcount" title="Permalink to this heading">¶</a></h4>
<p>Sometimes, we only care about there are how many entities in the group. Therefore, it is unnecessary to use <code class="docutils literal notranslate"><span class="pre">group()</span></code> step to get the complete group with every entities inside it.</p>
<p>We can simply use <code class="docutils literal notranslate"><span class="pre">groupCount()</span></code> step to achieve this purpose. The usage of <code class="docutils literal notranslate"><span class="pre">groupCount()</span></code> step is almost the same as <code class="docutils literal notranslate"><span class="pre">group()</span></code> step, but it will return the count instead of the complete group. For example, the following code calculates there are how many males and females in the graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Count the number of males and females</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).groupCount().by(&quot;gender&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;male&#39;</span>:<span class="w"> </span><span class="m">449</span>,<span class="w"> </span><span class="s1">&#39;female&#39;</span>:<span class="w"> </span><span class="m">454</span><span class="o">}]</span>
</pre></div>
</div>
</section>
</section>
<section id="order-step">
<h3>Order Step<a class="headerlink" href="#order-step" title="Permalink to this heading">¶</a></h3>
<p>By default, the output of Gremlin’s sentence in GIE is not ordered. Therefore, Gremlin provides <code class="docutils literal notranslate"><span class="pre">order()</span></code> step to order all the objects in the traversal up to this point and then emit them one-by-one in their ordered sequence.</p>
<p>As the same as <code class="docutils literal notranslate"><span class="pre">group()</span></code> step, the order key should be placed in the <code class="docutils literal notranslate"><span class="pre">by()</span></code> step following <code class="docutils literal notranslate"><span class="pre">order()</span></code> step. If there’s no <code class="docutils literal notranslate"><span class="pre">by()</span></code> step or the content of <code class="docutils literal notranslate"><span class="pre">by()</span></code> step is empty, it will use the default setting of order:</p>
<ul class="simple">
<li><p>use current value as the order key</p></li>
<li><p>ascending order</p></li>
</ul>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Order person vertices by default</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).order()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">216172782113783808</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">216172782113783809</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">216172782113783810</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">216172782113783811</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">216172782113783812</span><span class="p">],</span> <span class="o">......</span><span class="p">,</span> <span class="p">]</span>
</pre></div>
</div>
<p>The same as <code class="docutils literal notranslate"><span class="pre">group()</span></code> step, you can add either</p>
<ul class="simple">
<li><p>Property name or</p></li>
<li><p>sub-traversal sentence which will generate a single value</p></li>
</ul>
<p>to the <code class="docutils literal notranslate"><span class="pre">by()</span></code> step as the order key. In addition, you can determine whether the order is <code class="docutils literal notranslate"><span class="pre">ascending</span></code> or <code class="docutils literal notranslate"><span class="pre">descending</span></code> in the second parameter of the <code class="docutils literal notranslate"><span class="pre">by()</span></code> step.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Order person vertices by their first names, ascending</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).order().by(&quot;firstName&quot;, asc)&#39;</span><span class="p">)</span> <span class="c1"># asc is optional</span>
<span class="c1"># Order person vertices by their first names, descending</span>
<span class="n">q2</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).order().by(&quot;firstName&quot;,desc)&#39;</span><span class="p">)</span>
<span class="c1"># Order person vertices by their out degree, ascending</span>
<span class="n">q3</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).order().by(out().count(), asc)&#39;</span><span class="p">)</span> <span class="c1">#asc is optional</span>
<span class="c1"># Order person vertices by their out degree, descending</span>
<span class="n">q4</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).order().by(out().count(), desc)&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q2</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q3</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q4</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784082</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784169</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784267</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784368</span><span class="o">]</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784376</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783938</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784405</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783980</span><span class="o">]</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783844</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783901</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783935</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784439</span><span class="o">]</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
<span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784315</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784374</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784601</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784431</span><span class="o">]</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
</section>
<section id="limit-step">
<h3>Limit Step<a class="headerlink" href="#limit-step" title="Permalink to this heading">¶</a></h3>
<p>Gremlin sentences always generate a lot of traversers, but sometimes we only need some of them. Therefore, Gremlin provides <code class="docutils literal notranslate"><span class="pre">limit()</span></code> step to filter the objects in the traversal by the number of them to pass through the stream, where only the first n objects are allowed as defined by the limit argument.</p>
<p>For example, if you want to extract 10 person vertices from the graph, you can write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract 10 person vertices</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).limit(10)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783808</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783809</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783810</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783811</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783812</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783813</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783814</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783815</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783816</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783817</span><span class="o">]]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">limit()</span></code> step is usually used together with <code class="docutils literal notranslate"><span class="pre">order()</span></code> step to select <em>top(k)</em> vertices. For example, if you want to select 10 persons with the largest number of degrees, you can write in GIE as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract 10 person vertices with the largest number of degrees</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).order().by(both().count(), desc).limit(10)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113784601</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784315</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784011</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784374</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783971</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784431</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784333</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784154</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784381</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783933</span><span class="o">]]</span>
</pre></div>
</div>
</section>
<section id="expression-syntax-sugar">
<h3>Expression(Syntax Sugar)<a class="headerlink" href="#expression-syntax-sugar" title="Permalink to this heading">¶</a></h3>
<p>Currently, it is still kind of complicated when we need to apply many predicates together to the traversers.</p>
<p>For example, if you want to find all <code class="docutils literal notranslate"><span class="pre">male</span></code> <code class="docutils literal notranslate"><span class="pre">persons</span></code> that are <code class="docutils literal notranslate"><span class="pre">created</span></code> after <code class="docutils literal notranslate"><span class="pre">2012-01-01</span></code>, you may need two <code class="docutils literal notranslate"><span class="pre">has(...)</span></code> steps. The first <code class="docutils literal notranslate"><span class="pre">has()</span></code> step keeps all the <code class="docutils literal notranslate"><span class="pre">persons</span></code> whose <code class="docutils literal notranslate"><span class="pre">gender</span></code> property has value <code class="docutils literal notranslate"><span class="pre">male</span></code>, and the second <code class="docutils literal notranslate"><span class="pre">has()</span></code> step filters out all the <code class="docutils literal notranslate"><span class="pre">persons</span></code> whose <code class="docutils literal notranslate"><span class="pre">creationDate</span></code> property has value earlier than <code class="docutils literal notranslate"><span class="pre">2012-01-01</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find all male persons that are created after 2012-01-01</span>
<span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;person&quot;).has(&quot;gender&quot;, &quot;male&quot;).has(&quot;creationDate&quot;, gt(&quot;2012-01-01&quot;))&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>How can we combine many predicates together in a single filter operation? GIE supports a syntax sugar, **writing expressions directly in the filter operators **, to solve the problem!</p>
<p><strong>Expression</strong> is introduced to denote property-based calculations or filters, which consists of the following basic entries:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;</span></code>: the value of the current entry</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;.name</span></code>: the property value of <code class="docutils literal notranslate"><span class="pre">name</span></code> of the current entry</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;a</span></code>: the value of the entry <code class="docutils literal notranslate"><span class="pre">a</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;a.name</span></code>: the property value of <code class="docutils literal notranslate"><span class="pre">name</span></code> of the entry <code class="docutils literal notranslate"><span class="pre">a</span></code></p></li>
</ul>
<p>And related operations can be performed based on these entries, including:</p>
<ul>
<li><p>arithmetic</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@.age<span class="w"> </span>+<span class="w"> </span><span class="m">10</span>
@.age<span class="w"> </span>*<span class="w"> </span><span class="m">10</span>
<span class="o">(</span>@.age<span class="w"> </span>+<span class="w"> </span><span class="m">4</span><span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">10</span><span class="w"> </span>+<span class="w"> </span><span class="o">(</span>@.age<span class="w"> </span>-<span class="w"> </span><span class="m">5</span><span class="o">)</span>
</pre></div>
</div>
</li>
<li><p>logic comparison</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@.name<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;marko&quot;</span>
@.age<span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="m">10</span>
@.age<span class="w"> </span>&gt;<span class="w"> </span><span class="m">10</span>
@.age<span class="w"> </span>&lt;<span class="w"> </span><span class="m">10</span>
@.age<span class="w"> </span>&gt;<span class="o">=</span><span class="w"> </span><span class="m">10</span>
@.weight<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">10</span>.0
</pre></div>
</div>
</li>
<li><p>logic connector</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@.age<span class="w"> </span>&gt;<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>@.age<span class="w"> </span>&lt;<span class="w"> </span><span class="m">20</span>
@.age<span class="w"> </span>&lt;<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>@.age<span class="w"> </span>&gt;<span class="w"> </span><span class="m">20</span>
</pre></div>
</div>
</li>
<li><p>bit manipulation</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@.num<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">2</span>
@.num<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="m">2</span>
@.num<span class="w"> </span>^<span class="w"> </span><span class="m">2</span>
@.num<span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="m">2</span>
@.num<span class="w"> </span>&lt;&lt;<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
</li>
<li><p>exponentiation</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>@.num<span class="w"> </span>^^<span class="w"> </span><span class="m">3</span>
@.num<span class="w"> </span>^^<span class="w"> </span>-3
</pre></div>
</div>
</li>
</ul>
<p>We can write expressions in project(<code class="docutils literal notranslate"><span class="pre">select</span></code>) or filter(<code class="docutils literal notranslate"><span class="pre">where</span></code>) operators:</p>
<ul>
<li><p>filter: <code class="docutils literal notranslate"><span class="pre">where(expr(“…”))</span></code>, for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g.V<span class="o">()</span>.where<span class="o">(</span>expr<span class="o">(</span><span class="s2">&quot;@.name == \&quot;marko\&quot;&quot;</span><span class="o">))</span><span class="w"> </span><span class="c1"># = g.V().has(&quot;name&quot;, &quot;marko&quot;)</span>
g.V<span class="o">()</span>.where<span class="o">(</span>expr<span class="o">(</span><span class="s2">&quot;@.age &gt; 10&quot;</span><span class="o">))</span><span class="w"> </span><span class="c1"># = g.V().has(&quot;age&quot;, P.gt(10))</span>
g.V<span class="o">()</span>.as<span class="o">(</span><span class="s2">&quot;a&quot;</span><span class="o">)</span>.out<span class="o">()</span>.where<span class="o">(</span>expr<span class="o">(</span><span class="s2">&quot;@.name == \&quot;marko\&quot; || (@a.age &gt; 10)&quot;</span><span class="o">))</span>
</pre></div>
</div>
</li>
<li><p>project: <code class="docutils literal notranslate"><span class="pre">select(expr(“…”))</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g.V<span class="o">()</span>.select<span class="o">(</span>expr<span class="o">(</span><span class="s2">&quot;@.name&quot;</span><span class="o">))</span><span class="w"> </span><span class="c1"># = g.V().values(&quot;name&quot;)</span>
</pre></div>
</div>
</li>
</ul>
<p>Now, to find all  <code class="docutils literal notranslate"><span class="pre">male</span></code> <code class="docutils literal notranslate"><span class="pre">persons</span></code> that are <code class="docutils literal notranslate"><span class="pre">created</span></code> after <code class="docutils literal notranslate"><span class="pre">2012-01-01</span></code>, you only need to write:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find all male persons that are created after 2012-01-01</span>
<span class="nv">q1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>g.execute<span class="o">(</span><span class="s2">&quot;g.V().hasLabel(&#39;person&#39;).where(expr(&#39;@.gender == \&quot;male\&quot; &amp;&amp; @.creationDate &gt; \&quot;2012-01-01\&quot;&#39;))&quot;</span><span class="o">)</span>
print<span class="o">(</span>q1.all<span class="o">()</span>.result<span class="o">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>v<span class="o">[</span><span class="m">216172782113783813</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783819</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783826</span><span class="o">]</span>,<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783836</span><span class="o">]</span>,<span class="w"> </span>...,<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
</section>
</section>
<section id="complex-queries">
<h2>Complex Queries<a class="headerlink" href="#complex-queries" title="Permalink to this heading">¶</a></h2>
<p>In this tutorial, we will mainly discuss how to use GIE with Gremlin sentences to make some complex queries. The queries we choose are mainly from LDBC BI Workload.</p>
<section id="ldbc-bi2">
<h3>LDBC BI2<a class="headerlink" href="#ldbc-bi2" title="Permalink to this heading">¶</a></h3>
<figure class="align-default" id="id25">
<a class="reference internal image-reference" href="../../_images/bi2.png"><img alt="bi2" src="../../_images/bi2.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 25. LDBC BI Query2.</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>This figure illustrates LDBC BI2 query. This query aims to find the <code class="docutils literal notranslate"><span class="pre">Tags</span></code> under a given <code class="docutils literal notranslate"><span class="pre">TagClass</span></code> that were used in <code class="docutils literal notranslate"><span class="pre">Messages</span></code> during in the 100-day time window starting at date and compare it with the 100-day time window that follows. For the <code class="docutils literal notranslate"><span class="pre">Tags</span></code> and for both time windows, compute the count of <code class="docutils literal notranslate"><span class="pre">Messages</span></code>.</p>
<p>The key to this query is creating two sub execution branches to count the two windows separately. We can use Gremlin’s <code class="docutils literal notranslate"><span class="pre">by()</span></code> step to achieve the purpose. Assume the <code class="docutils literal notranslate"><span class="pre">TagClass's</span> <span class="pre">name='Actor'</span></code> <code class="docutils literal notranslate"><span class="pre">$date='2012-01-01'</span></code>, <code class="docutils literal notranslate"><span class="pre">$date+100='2012-04-09'$</span></code> and <code class="docutils literal notranslate"><span class="pre">$date+200='2012-07-18'</span></code>:</p>
<ol class="arabic">
<li><p>Firstly, we have to find all <code class="docutils literal notranslate"><span class="pre">Tags</span></code> related to the given <code class="docutils literal notranslate"><span class="pre">TagClass</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">g.V().has(&quot;tagclass&quot;,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;Actor&quot;).in(&quot;hasType&quot;).as(&quot;tag&quot;)</span></code></p>
</li>
<li><p>Then, we need to count for the first window: all the messages created from <code class="docutils literal notranslate"><span class="pre">2012-01-01</span></code> to <code class="docutils literal notranslate"><span class="pre">2012-04-09</span></code> and having the specific <code class="docutils literal notranslate"><span class="pre">Tag</span></code>. Since there are two separate counting tasks, we have to use <code class="docutils literal notranslate"><span class="pre">select()</span></code> followed by <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> step to create a new sub branch to execute the task.</p>
<p><code class="docutils literal notranslate"><span class="pre">.select(&quot;tag&quot;).by(__.in(&quot;hasTag&quot;).hasLabel(&quot;comment&quot;).has(&quot;creationDate&quot;,</span> <span class="pre">inside(&quot;2012-01-01&quot;,</span> <span class="pre">&quot;2012-04-09&quot;)).dedup().count()).as(&quot;count1&quot;)</span></code></p>
</li>
<li><p>Next, we need to count for the second window: all the messages created from <code class="docutils literal notranslate"><span class="pre">2012-04-09</span></code> to <code class="docutils literal notranslate"><span class="pre">2012-07-18</span></code> and having the specific <code class="docutils literal notranslate"><span class="pre">Tag</span></code>. Still, we use <code class="docutils literal notranslate"><span class="pre">select()</span></code> followed by <code class="docutils literal notranslate"><span class="pre">by(...)</span></code> step to create a new sub branch to execute the task.</p>
<p><code class="docutils literal notranslate"><span class="pre">.select(&quot;tag&quot;).by(__.in(&quot;hasTag&quot;).hasLabel(&quot;comment&quot;).has(&quot;creationDate&quot;,</span> <span class="pre">inside(&quot;2012-04-09&quot;,</span> <span class="pre">&quot;2012-07-18&quot;)).dedup().count()).as(&quot;count2&quot;)\</span></code></p>
</li>
<li><p>Finally, we select <code class="docutils literal notranslate"><span class="pre">tag's</span> <span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">count1</span></code> and <code class="docutils literal notranslate"><span class="pre">count2</span></code>  from the traversers as the output</p>
<p><code class="docutils literal notranslate"><span class="pre">.select(&quot;tag&quot;,</span> <span class="pre">&quot;count1&quot;,</span> <span class="pre">&quot;count2&quot;).by(&quot;name&quot;).by().by()')</span></code></p>
</li>
</ol>
<p>Combine these procedures together, we can write the following code in GIE to make the LDBC BI2 query:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().has(&quot;tagclass&quot;, &quot;name&quot;, &quot;Actor&quot;).in(&quot;hasType&quot;).as(&quot;tag&quot;)</span><span class="se">\</span>
<span class="s1">                .select(&quot;tag&quot;).by(__.in(&quot;hasTag&quot;).hasLabel(&quot;comment&quot;)</span><span class="se">\</span>
<span class="s1">                .has(&quot;creationDate&quot;, inside(&quot;2012-01-01&quot;, &quot;2012-04-09&quot;))</span><span class="se">\</span>
<span class="s1">                .dedup().count()).as(&quot;count1&quot;)</span><span class="se">\</span>
<span class="s1">                .select(&quot;tag&quot;).by(__.in(&quot;hasTag&quot;).hasLabel(&quot;comment&quot;)</span><span class="se">\</span>
<span class="s1">                .has(&quot;creationDate&quot;, inside(&quot;2012-04-09&quot;, &quot;2012-07-18&quot;))</span><span class="se">\</span>
<span class="s1">                .dedup().count()).as(&quot;count2&quot;)</span><span class="se">\</span>
<span class="s1">                .select(&quot;tag&quot;, &quot;count1&quot;, &quot;count2&quot;)</span><span class="se">\</span>
<span class="s1">                .by(&quot;name&quot;).by().by()&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Query results for ldbc bi2 query</span>
<span class="o">[{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Jet_Li&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Zhang_Yimou&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Faye_Wong&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Tsui_Hark&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">7</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Bruce_Lee&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">12</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">20</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Johnny_Depp&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Tom_Cruise&#39;</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;count1&#39;</span>:<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="s1">&#39;count2&#39;</span>:<span class="w"> </span><span class="m">7</span>,<span class="w"> </span><span class="s1">&#39;tag&#39;</span>:<span class="w"> </span><span class="s1">&#39;Jackie_Chan&#39;</span><span class="o">}]</span>
</pre></div>
</div>
</section>
<section id="ldbc-bi3">
<h3>LDBC BI3<a class="headerlink" href="#ldbc-bi3" title="Permalink to this heading">¶</a></h3>
<figure class="align-default" id="id26">
<a class="reference internal image-reference" href="../../_images/bi3.png"><img alt="bi3" src="../../_images/bi3.png" style="width: 65%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 26. LDBC BI Query3.</span><a class="headerlink" href="#id26" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>This figure illustrates LDBC BI3 query. Given a <code class="docutils literal notranslate"><span class="pre">TagClass</span></code> and <code class="docutils literal notranslate"><span class="pre">Country</span></code>, this query aims to find all the <code class="docutils literal notranslate"><span class="pre">Forums</span></code> created in the given <code class="docutils literal notranslate"><span class="pre">Country</span></code>, containing at least one <code class="docutils literal notranslate"><span class="pre">Message</span></code> with <code class="docutils literal notranslate"><span class="pre">Tags</span></code> belonging directly to the given <code class="docutils literal notranslate"><span class="pre">TagClass</span></code>, and count the <code class="docutils literal notranslate"><span class="pre">Messages</span></code> by the <code class="docutils literal notranslate"><span class="pre">Forum</span></code> which contains them.</p>
<p>The location of a <code class="docutils literal notranslate"><span class="pre">Forum</span></code> is identified by the location of the Forum’s moderator. Here comes another question, how to determine whether the forum contains a message directly related to the given <code class="docutils literal notranslate"><span class="pre">TagClass</span></code> or not? We assume that a message is contained by a forum if:</p>
<ul class="simple">
<li><p>It replies a post contained by the forum</p></li>
<li><p>It replies a message contained by the forum</p></li>
</ul>
<p>Therefore, we can use <code class="docutils literal notranslate"><span class="pre">out(1..)</span></code>  path expand step in Gremlin to find all the messages contained by a forum. However, the infinite path length may lead to serious computation cost. Therefore, the upper bound of the path expand is set to 6. Then we can use another two <code class="docutils literal notranslate"><span class="pre">out('hasTag')</span></code> and <code class="docutils literal notranslate"><span class="pre">out('hasType')</span></code> step followed by the filter <code class="docutils literal notranslate"><span class="pre">has('name',</span> <span class="pre">TAGCLASS)</span></code> to determine whether the message has required tag or not.</p>
<p>Assume the <code class="docutils literal notranslate"><span class="pre">Country's</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">'China'</span></code> and <code class="docutils literal notranslate"><span class="pre">TagClass's</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">'Song'</span></code>, we can write in GIE as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().has(&quot;place&quot;, &quot;name&quot;, &quot;China&quot;).in(&quot;isPartOf&quot;).in(&quot;isLocatedIn&quot;).as(&quot;person&quot;)</span><span class="se">\</span>
<span class="s1">            .in(&quot;hasModerator&quot;).as(&quot;forum&quot;).select(&quot;forum&quot;)</span><span class="se">\</span>
<span class="s1">            .by(out(&quot;containerOf&quot;).in(&quot;1..6&quot;, &quot;replyOf&quot;).endV().as(&quot;message&quot;)</span><span class="se">\</span>
<span class="s1">            .out(&quot;hasTag&quot;).out(&quot;hasType&quot;).has(&quot;name&quot;, &quot;Song&quot;)</span><span class="se">\</span>
<span class="s1">            .select(&quot;msg&quot;).dedup().count()).as(&quot;message_count&quot;)</span><span class="se">\</span>
<span class="s1">            .select(&quot;person&quot;, &quot;forum&quot;, &quot;message_count&quot;)</span><span class="se">\</span>
<span class="s1">            .by(&quot;id&quot;).by(valueMap(&quot;id&quot;, &quot;title&quot;, &quot;creationDate&quot;)).by())&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Query results for ldbc bi3 query</span>
<span class="o">[{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="m">824633725780</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;creationDate&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;2012-01-08T02:52:34.334+0000&#39;</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Album 3 of Hao Wang&#39;</span><span class="o">]}</span>,
<span class="w">  </span><span class="s1">&#39;person&#39;</span>:<span class="w"> </span><span class="m">19791209300479</span>,
<span class="w">  </span><span class="s1">&#39;message&#39;</span>:<span class="w"> </span><span class="m">0</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="m">755914248304</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;creationDate&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;2012-01-02T20:35:03.344+0000&#39;</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Wall of Lin Lei&#39;</span><span class="o">]}</span>,
<span class="w">  </span><span class="s1">&#39;person&#39;</span>:<span class="w"> </span><span class="m">24189255811275</span>,
<span class="w">  </span><span class="s1">&#39;message&#39;</span>:<span class="w"> </span><span class="m">0</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="m">824633725045</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;creationDate&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;2012-02-03T18:15:52.633+0000&#39;</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Album 4 of Lin Lei&#39;</span><span class="o">]}</span>,
<span class="w">  </span><span class="s1">&#39;person&#39;</span>:<span class="w"> </span><span class="m">24189255811275</span>,
<span class="w">  </span><span class="s1">&#39;message&#39;</span>:<span class="w"> </span><span class="m">0</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="m">893353201782</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;creationDate&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;2012-03-28T23:02:53.251+0000&#39;</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Album 5 of Lin Lei&#39;</span><span class="o">]}</span>,
<span class="w">  </span><span class="s1">&#39;person&#39;</span>:<span class="w"> </span><span class="m">24189255811275</span>,
<span class="w">  </span><span class="s1">&#39;message&#39;</span>:<span class="w"> </span><span class="m">0</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;id&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="m">1030792152809</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;creationDate&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;2012-09-03T09:47:01.414+0000&#39;</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Wall of Lei Chen&#39;</span><span class="o">]}</span>,
<span class="w">  </span><span class="s1">&#39;person&#39;</span>:<span class="w"> </span><span class="m">32985348833887</span>,
<span class="w">  </span><span class="s1">&#39;message&#39;</span>:<span class="w"> </span><span class="m">0</span><span class="o">}</span>,
...
<span class="w">   </span><span class="s1">&#39;creationDate&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;2012-03-07T07:30:01.038+0000&#39;</span><span class="o">]</span>,
<span class="w">   </span><span class="s1">&#39;title&#39;</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;Album 0 of Zhang Yang&#39;</span><span class="o">]}</span>,
<span class="w">  </span><span class="s1">&#39;person&#39;</span>:<span class="w"> </span><span class="m">15393162789707</span>,
<span class="w">  </span><span class="s1">&#39;message&#39;</span>:<span class="w"> </span><span class="m">0</span><span class="o">}</span>,
<span class="w"> </span>...<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="ldbc-bi4-left-part">
<h3>LDBC BI4(Left Part)<a class="headerlink" href="#ldbc-bi4-left-part" title="Permalink to this heading">¶</a></h3>
<figure class="align-default" id="id27">
<a class="reference internal image-reference" href="../../_images/bi4(left_part).png"><img alt="bi4(left_part)" src="../../_images/bi4%28left_part%29.png" style="width: 30%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 27. LDBC BI Query4(Left Part).</span><a class="headerlink" href="#id27" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>This figure illustrates the left part of the LDBC BI4 query. The query aims to find the top 100 forum of every country based on the memberCount, and the forum should be created after the given date.</p>
<p>Since GIE doesn’t provide global storage currently, we cannot pick out the top 100 forums of every country using Gremlin sentence directly. We can retrieve a tuple of <code class="docutils literal notranslate"><span class="pre">(country,</span> <span class="pre">forum,</span> <span class="pre">country_count)</span></code> at first.</p>
<p>Assume <code class="docutils literal notranslate"><span class="pre">Forum's</span> <span class="pre">creationDate</span> <span class="pre">&gt;</span> <span class="pre">'2012-01-01'</span></code>, we can write in GIE as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().hasLabel(&quot;place&quot;).as(&quot;country&quot;).in(&quot;isPartOf&quot;).in(&quot;isLocatedIn&quot;)</span><span class="se">\</span>
<span class="s1">           .in(&quot;hasMember&quot;).as(&quot;forum&quot;).dedup(&quot;country&quot;,&quot;forum&quot;)</span><span class="se">\</span>
<span class="s1">           .select(&quot;forum&quot;).by(out(&quot;hasMember&quot;).as(&quot;person&quot;).out(&quot;isLocatedIn&quot;)</span><span class="se">\</span>
<span class="s1">           .out(&quot;isPartOf&quot;).where(eq(&quot;country&quot;)).select(&quot;person&quot;).dedup().count())</span><span class="se">\</span>
<span class="s1">           .as(&quot;personCount&quot;).select(&quot;country&quot;, &quot;forum&quot;, &quot;personCount&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037932503</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">2</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037932473</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037932489</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037932494</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037932501</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">2</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037934803</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037934804</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037935005</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">2</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037928132</span><span class="o">]</span>,
...
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;forum&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">72057594037935879</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;country&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">288230376151711799</span><span class="o">]</span>,
<span class="w">  </span><span class="s1">&#39;personCount&#39;</span>:<span class="w"> </span><span class="m">1</span><span class="o">}</span>,
<span class="w"> </span>...<span class="o">]</span>
</pre></div>
</div>
<p>Since GIE provides the python interface, then we can write codes to calculate the top 100 forum for each country very conveniently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">country_top100_forums_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">traverser</span> <span class="ow">in</span> <span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">():</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">traverser</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span>
    <span class="n">forum</span> <span class="o">=</span> <span class="n">traverser</span><span class="p">[</span><span class="s1">&#39;forum&#39;</span><span class="p">]</span>
    <span class="n">personCount</span> <span class="o">=</span> <span class="n">traverser</span><span class="p">[</span><span class="s1">&#39;personCount&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">country_top100_forums_dict</span><span class="p">:</span>
        <span class="n">country_top100_forums_dict</span><span class="p">[</span><span class="n">country</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">forum</span><span class="p">,</span> <span class="n">personCount</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">country_top100_forums_dict</span><span class="p">[</span><span class="n">country</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">forum</span><span class="p">,</span> <span class="n">personCount</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">personCountForums</span> <span class="ow">in</span> <span class="n">country_top100_forums_dict</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">personCountForums</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">personCountForums</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
        <span class="n">personCountForums</span> <span class="o">=</span> <span class="n">personCountForums</span><span class="p">[:</span><span class="mi">100</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">country_top100_forums_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>The result of LDBC BI Query 4(Left Part) should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>v<span class="o">[</span><span class="m">288230376151711797</span><span class="o">]</span>:<span class="w"> </span><span class="o">[(</span>v<span class="o">[</span><span class="m">72057594037935702</span><span class="o">]</span>,<span class="w"> </span><span class="m">7</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930685</span><span class="o">]</span>,<span class="w"> </span><span class="m">7</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932114</span><span class="o">]</span>,<span class="w"> </span><span class="m">6</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934231</span><span class="o">]</span>,<span class="w"> </span><span class="m">5</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935703</span><span class="o">]</span>,<span class="w"> </span><span class="m">5</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935730</span><span class="o">]</span>,<span class="w"> </span><span class="m">5</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935734</span><span class="o">]</span>,<span class="w"> </span><span class="m">5</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932509</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935707</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935708</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935711</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935714</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935719</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935729</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935731</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935724</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929560</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931546</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931545</span><span class="o">]</span>,<span class="w"> </span><span class="m">4</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932479</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932485</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932505</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932511</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935710</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935722</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929246</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037928266</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935713</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934308</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934313</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934302</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930430</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934303</span><span class="o">]</span>,<span class="w"> </span><span class="m">3</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932503</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932482</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935147</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935148</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935157</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037927973</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929386</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934315</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932501</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935005</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935720</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935015</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934300</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930861</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934319</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931542</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929583</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037933324</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929182</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929739</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934829</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935658</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935660</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935674</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935682</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935683</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935672</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037927978</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935163</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935014</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931544</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934297</span><span class="o">]</span>,<span class="w"> </span><span class="m">2</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037927979</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932473</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932474</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934384</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932639</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934380</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935146</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935152</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934804</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037928134</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037928674</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929248</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931240</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931247</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931256</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930958</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930963</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931259</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931260</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931262</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929365</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929419</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929421</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929431</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929434</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929437</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929446</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929447</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929449</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929450</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935166</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929519</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929451</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929452</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935046</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932339</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932481</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934294</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932389</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932976</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930870</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931266</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037928092</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037928495</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929510</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929517</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929961</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929965</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930242</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930248</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930250</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930313</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931547</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935686</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929052</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929053</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929055</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929057</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929060</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934811</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934813</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934816</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934821</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934822</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934823</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934828</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934835</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934837</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934975</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934976</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935032</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935038</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935045</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935664</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935673</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935678</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935685</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931549</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931550</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931552</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931554</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931557</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931560</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931566</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935671</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935670</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934977</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931543</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037929518</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935679</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931575</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932438</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932878</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932886</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932888</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037927982</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930526</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930535</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930546</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930976</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930536</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931358</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930366</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931574</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932435</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935020</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037935864</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037933861</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932440</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037927981</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931349</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931366</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932885</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037927980</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930529</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037930532</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037931304</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932433</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037932441</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)</span>,<span class="w"> </span><span class="o">(</span>v<span class="o">[</span><span class="m">72057594037934547</span><span class="o">]</span>,<span class="w"> </span><span class="m">1</span><span class="o">)]</span>,<span class="w"> </span>......
</pre></div>
</div>
</section>
<section id="ldbc-bi11">
<h3>LDBC BI11<a class="headerlink" href="#ldbc-bi11" title="Permalink to this heading">¶</a></h3>
<figure class="align-default" id="id28">
<a class="reference internal image-reference" href="../../_images/bi11.png"><img alt="bi11" src="../../_images/bi11.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 28. LDBC BI Query11.</span><a class="headerlink" href="#id28" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>This figure illustrates LDBC BI11 query. This query aims to find three persons tagged as a, b, c, where:</p>
<ul class="simple">
<li><p>a, b, c know each other</p></li>
<li><p>a, b, c live in the same country</p></li>
<li><p>their relationship(‘knows’) were created in the range [<code class="docutils literal notranslate"><span class="pre">startDate</span></code>, <code class="docutils literal notranslate"><span class="pre">endDate</span></code>]</p></li>
</ul>
<p>It is easy to use Gremlin’s <code class="docutils literal notranslate"><span class="pre">match(...)</span></code> step to describe this query. Assume the <code class="docutils literal notranslate"><span class="pre">Country's</span> <span class="pre">name=China</span></code>, the <code class="docutils literal notranslate"><span class="pre">startDate='2012-01-01'</span></code>, the <code class="docutils literal notranslate"><span class="pre">endDate='2012-07-01'</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().match(__.as(&quot;a&quot;).bothE(&quot;knows&quot;)</span><span class="se">\</span>
<span class="s1">                              .has(&quot;creationDate&quot;, inside(&quot;2012-01-01&quot;, &quot;2012-07-01&quot;))</span><span class="se">\</span>
<span class="s1">                              .otherV().as(&quot;b&quot;),</span><span class="se">\</span>
<span class="s1">                            __.as(&quot;a&quot;).bothE(&quot;knows&quot;)</span><span class="se">\</span>
<span class="s1">                              .has(&quot;creationDate&quot;, inside(&quot;2012-01-01&quot;, &quot;2012-07-01&quot;))</span><span class="se">\</span>
<span class="s1">                              .otherV().as(&quot;c&quot;),</span><span class="se">\</span>
<span class="s1">                            __.as(&quot;a&quot;).bothE(&quot;knows&quot;)</span><span class="se">\</span>
<span class="s1">                               .has(&quot;creationDate&quot;, inside(&quot;2012-01-01&quot;, &quot;2012-07-01&quot;))</span><span class="se">\</span>
<span class="s1">                               .otherV().as(&quot;c&quot;),</span><span class="se">\</span>
<span class="s1">                            __.as(&quot;a&quot;).out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;).as(&quot;d&quot;),</span><span class="se">\</span>
<span class="s1">                            __.as(&quot;b&quot;).out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;).as(&quot;d&quot;),</span><span class="se">\</span>
<span class="s1">                            __.as(&quot;c&quot;).out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;).as(&quot;d&quot;),</span><span class="se">\</span>
<span class="s1">                            __.as(&quot;d&quot;).has(&quot;name&quot;, &quot;China&quot;).as(&quot;d&quot;))</span><span class="se">\</span>
<span class="s1">                     .select(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Query results for ldbc bi11 query</span>
<span class="o">[{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784091</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783882</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784250</span><span class="o">]}</span>,<span class="w"> </span>......,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;a&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784403</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;b&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784537</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;c&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784122</span><span class="o">]}]</span>
</pre></div>
</div>
</section>
<section id="ldbc-bi14">
<h3>LDBC BI14<a class="headerlink" href="#ldbc-bi14" title="Permalink to this heading">¶</a></h3>
<figure class="align-default" id="id29">
<a class="reference internal image-reference" href="../../_images/bi14.png"><img alt="bi14" src="../../_images/bi14.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-text">Figure 29. LDBC BI Query14.</span><a class="headerlink" href="#id29" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>This figure illustrates LDBC BI14 query. Here is its purpose:</p>
<p>Consider all pairs of people (<code class="docutils literal notranslate"><span class="pre">person1</span></code>, <code class="docutils literal notranslate"><span class="pre">person2</span></code>) such that</p>
<ol class="arabic simple">
<li><p>they know each other,</p></li>
<li><p>one is located in a City of Country <code class="docutils literal notranslate"><span class="pre">country1</span></code>,</p></li>
<li><p>and the other is located in a City of Country <code class="docutils literal notranslate"><span class="pre">country2</span></code>.</p></li>
</ol>
<p>For each City of Country <code class="docutils literal notranslate"><span class="pre">country1</span></code>, return the highest scoring pair. The score of a pair is defined as the sum of the subscores awarded for the following kinds of interaction. The initial value is score = 0.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">person1</span></code> has created a reply <code class="docutils literal notranslate"><span class="pre">Comment</span></code> to at least one <code class="docutils literal notranslate"><span class="pre">Message</span></code> by <code class="docutils literal notranslate"><span class="pre">person2</span></code>: score += 4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">person1</span></code> has created at least one <code class="docutils literal notranslate"><span class="pre">Message</span></code> that <code class="docutils literal notranslate"><span class="pre">person2</span></code> has created a reply to: score += 1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">person1</span></code> liked at least one <code class="docutils literal notranslate"><span class="pre">Message</span></code> by <code class="docutils literal notranslate"><span class="pre">person2</span></code>: score += 10</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">person1</span></code> has created at least one <code class="docutils literal notranslate"><span class="pre">Message</span></code> that was liked by <code class="docutils literal notranslate"><span class="pre">person2</span></code>: score += 1</p></li>
</ol>
<p>Assume <code class="docutils literal notranslate"><span class="pre">country1's</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">&quot;India&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">country2's</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">&quot;Chile&quot;</span></code>, we can write in GIE as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">q1</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;g.V().has(&quot;place&quot;, &quot;name&quot;, &quot;India&quot;)</span><span class="se">\</span>
<span class="s1">                .in(&quot;isPartOf&quot;).in(&quot;isLocatedIn&quot;).as(&quot;p1&quot;)</span><span class="se">\</span>
<span class="s1">                .both(&quot;knows&quot;).as(&quot;p2&quot;).out(&quot;isLocatedIn&quot;).out(&quot;isPartOf&quot;)</span><span class="se">\</span>
<span class="s1">                .has(&quot;name&quot;, &quot;Chile&quot;)</span><span class="se">\</span>
<span class="s1">                .select(&quot;p1&quot;).by(in(&quot;hasCreator&quot;).hasLabel(&quot;comment&quot;).out(&quot;replyOf&quot;)</span><span class="se">\</span>
<span class="s1">                .out(&quot;hasCreator&quot;).where(eq(&quot;p2&quot;)).select(&quot;p1&quot;).dedup().count()).as(&quot;case1&quot;)</span><span class="se">\</span>
<span class="s1">                .select(&quot;p1&quot;).by(in(&quot;hasCreator&quot;).in(&quot;replyOf&quot;).hasLabel(&quot;comment&quot;)</span><span class="se">\</span>
<span class="s1">                .out(&quot;hasCreator&quot;).where(eq(&quot;p2&quot;)).select(&quot;p1&quot;).dedup().count()).as(&quot;case2&quot;)</span><span class="se">\</span>
<span class="s1">                .select(&quot;p1&quot;).by(out(&quot;likes&quot;).hasLabel(&quot;post&quot;, &quot;comment&quot;)\.out(&quot;hasCreator&quot;)</span><span class="se">\\</span>
                <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;p2&quot;</span><span class="p">))</span>\<span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dedup</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">())</span><span class="o">.</span><span class="k">as</span><span class="p">(</span><span class="s2">&quot;case3&quot;</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="ow">in</span><span class="p">(</span><span class="s2">&quot;hasCreator&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">hasLabel</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;comment&quot;</span><span class="p">)</span><span class="o">.</span><span class="ow">in</span><span class="p">(</span><span class="s2">&quot;likes&quot;</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;p2&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dedup</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">())</span><span class="o">.</span><span class="k">as</span><span class="p">(</span><span class="s2">&quot;case4&quot;</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">expr</span><span class="p">(</span><span class="s2">&quot;@case1 * 4 + @case2 * 1 + @case3 * 10 + @case4 * 1&quot;</span><span class="p">))</span><span class="o">.</span><span class="k">as</span><span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">)</span><span class="s1">&#39;)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
</pre></div>
</div>
<p>The output of LDBC BI14 query should be like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Query results for ldbc bi14 query</span>
<span class="o">[{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784153</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784100</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783956</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784673</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784252</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784263</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784193</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784100</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784242</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784263</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784623</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">11</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784498</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784251</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784538</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784167</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">11</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784100</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113783864</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">12</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784100</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784613</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784116</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784481</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">16</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784498</span><span class="o">]}</span>,
<span class="w"> </span><span class="o">{</span><span class="s1">&#39;p1&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784481</span><span class="o">]</span>,<span class="w"> </span><span class="s1">&#39;score&#39;</span>:<span class="w"> </span><span class="m">16</span>,<span class="w"> </span><span class="s1">&#39;p2&#39;</span>:<span class="w"> </span>v<span class="o">[</span><span class="m">216172782113784100</span><span class="o">]}]</span>
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="supported_gremlin_steps.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Supported Gremlin Steps</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="guide_and_examples.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Guide and Examples</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2020-2023, DAMO Academy, Alibaba Inc.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link muted-link" href="https://github.com/alibaba/GraphScope" aria-label="GitHub"><svg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 16 16'><path fill-rule='evenodd' d='M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z'></path></svg></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Tutorial: LDBC Gremlin</a><ul>
<li><a class="reference internal" href="#load-the-ldbc-graph">Load the LDBC Graph</a></li>
<li><a class="reference internal" href="#basic-vertex-edge-query">Basic Vertex/Edge Query</a><ul>
<li><a class="reference internal" href="#retrieve-vertices-and-edges">Retrieve Vertices and Edges</a></li>
<li><a class="reference internal" href="#apply-some-filters">Apply Some Filters</a></li>
<li><a class="reference internal" href="#extract-property-values">Extract Property Values</a></li>
<li><a class="reference internal" href="#real-applications">Real Applications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-traversal-query">Basic Traversal Query</a><ul>
<li><a class="reference internal" href="#expansion">Expansion</a><ul>
<li><a class="reference internal" href="#out-in-and-both">out(), in() and both()</a></li>
<li><a class="reference internal" href="#oute-ine-and-bothe">outE(), inE() and bothE()</a></li>
<li><a class="reference internal" href="#outv-inv-bothv-and-otherv">outV(), inV(), bothV() and otherV()</a></li>
<li><a class="reference internal" href="#multiple-expansion-steps">Multiple Expansion Steps</a></li>
<li><a class="reference internal" href="#expansion-from-many-starting-points">Expansion from many starting points</a></li>
</ul>
</li>
<li><a class="reference internal" href="#filter-expansion">Filter &amp; Expansion</a><ul>
<li><a class="reference internal" href="#apply-filters-after-expansion">Apply filters after expansion</a></li>
<li><a class="reference internal" href="#expansion-as-filters">Expansion as filters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#path-expansion-syntactic-sugar">Path Expansion (Syntactic Sugar)</a></li>
<li><a class="reference internal" href="#id1">Real Applications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pattern-match">Pattern Match</a></li>
<li><a class="reference internal" href="#relational-operations">Relational Operations</a><ul>
<li><a class="reference internal" href="#filter-steps">Filter Steps</a><ul>
<li><a class="reference internal" href="#hasid"><code class="docutils literal notranslate"><span class="pre">hasId()</span></code></a></li>
<li><a class="reference internal" href="#where"><code class="docutils literal notranslate"><span class="pre">where()</span></code></a></li>
<li><a class="reference internal" href="#dedup"><code class="docutils literal notranslate"><span class="pre">dedup()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-steps">Project Steps</a><ul>
<li><a class="reference internal" href="#id-and-label"><code class="docutils literal notranslate"><span class="pre">id()</span></code> and <code class="docutils literal notranslate"><span class="pre">label()</span></code></a></li>
<li><a class="reference internal" href="#constant"><code class="docutils literal notranslate"><span class="pre">constant()</span></code></a></li>
<li><a class="reference internal" href="#valuemap"><code class="docutils literal notranslate"><span class="pre">valueMap()</span></code></a></li>
<li><a class="reference internal" href="#select"><code class="docutils literal notranslate"><span class="pre">select()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#aggregate-steps">Aggregate Steps</a><ul>
<li><a class="reference internal" href="#fold"><code class="docutils literal notranslate"><span class="pre">fold()</span></code></a></li>
<li><a class="reference internal" href="#sum-min-max-and-mean"><code class="docutils literal notranslate"><span class="pre">sum()</span></code>, <code class="docutils literal notranslate"><span class="pre">min()</span></code>, <code class="docutils literal notranslate"><span class="pre">max()</span></code> and  <code class="docutils literal notranslate"><span class="pre">mean()</span></code></a></li>
<li><a class="reference internal" href="#group"><code class="docutils literal notranslate"><span class="pre">group()</span></code></a></li>
<li><a class="reference internal" href="#groupcount"><code class="docutils literal notranslate"><span class="pre">groupCount()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#order-step">Order Step</a></li>
<li><a class="reference internal" href="#limit-step">Limit Step</a></li>
<li><a class="reference internal" href="#expression-syntax-sugar">Expression(Syntax Sugar)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#complex-queries">Complex Queries</a><ul>
<li><a class="reference internal" href="#ldbc-bi2">LDBC BI2</a></li>
<li><a class="reference internal" href="#ldbc-bi3">LDBC BI3</a></li>
<li><a class="reference internal" href="#ldbc-bi4-left-part">LDBC BI4(Left Part)</a></li>
<li><a class="reference internal" href="#ldbc-bi11">LDBC BI11</a></li>
<li><a class="reference internal" href="#ldbc-bi14">LDBC BI14</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=ccbe24c1"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>